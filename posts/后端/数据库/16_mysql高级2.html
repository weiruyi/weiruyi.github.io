<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.43" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/16_mysql%E9%AB%98%E7%BA%A72.html"><meta property="og:site_name" content="Lance"><meta property="og:title" content="MySQLé«˜çº§äºŒ"><meta property="og:description" content="MySQLé«˜çº§äºŒ ä¸€ã€é” é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œé™¤ä¼ ç»Ÿçš„è®¡ç®—èµ„æºï¼ˆCPUã€RAMã€I/Oï¼‰çš„äº‰ç”¨ä»¥å¤–ï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«çš„èµ„æºã€‚å¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§æ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œé”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚ InnoDBæŒ‰ç…§é”çš„ç²’åº¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š è¡Œçº§é”ï¼šæ¯æ¬¡æ“ä½œé”..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-11-26T11:10:12.000Z"><meta property="article:author" content="RuyiWei"><meta property="article:tag" content="mysql"><meta property="article:published_time" content="2024-11-22T16:14:58.000Z"><meta property="article:modified_time" content="2024-11-26T11:10:12.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MySQLé«˜çº§äºŒ","image":[""],"datePublished":"2024-11-22T16:14:58.000Z","dateModified":"2024-11-26T11:10:12.000Z","author":[{"@type":"Person","name":"RuyiWei"}]}</script><link rel="icon" href="/logo.png"><title>MySQLé«˜çº§äºŒ | Lance</title><meta name="description" content="MySQLé«˜çº§äºŒ ä¸€ã€é” é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œé™¤ä¼ ç»Ÿçš„è®¡ç®—èµ„æºï¼ˆCPUã€RAMã€I/Oï¼‰çš„äº‰ç”¨ä»¥å¤–ï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«çš„èµ„æºã€‚å¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§æ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œé”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚ InnoDBæŒ‰ç…§é”çš„ç²’åº¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š è¡Œçº§é”ï¼šæ¯æ¬¡æ“ä½œé”...">
    <link rel="preload" href="/assets/style-CIdtaYfF.css" as="style"><link rel="stylesheet" href="/assets/style-CIdtaYfF.css">
    <link rel="modulepreload" href="/assets/app-zhc43KOw.js"><link rel="modulepreload" href="/assets/16_mysqlé«˜çº§2.html-DoJ6Re9T.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-BVeQUw1o.js" as="script"><link rel="prefetch" href="/assets/AliOSS.html-D4TPY1dS.js" as="script"><link rel="prefetch" href="/assets/Docker.html-Be6Rm54d.js" as="script"><link rel="prefetch" href="/assets/Git.html-BHfXMf13.js" as="script"><link rel="prefetch" href="/assets/Markdown.html-CK9gf2g0.js" as="script"><link rel="prefetch" href="/assets/latexMath.html-CwOa5ccW.js" as="script"><link rel="prefetch" href="/assets/index.html-BXTHamBm.js" as="script"><link rel="prefetch" href="/assets/2_goé”æœºåˆ¶.html-Ov_Bri_-.js" as="script"><link rel="prefetch" href="/assets/index.html-CHhy2bGr.js" as="script"><link rel="prefetch" href="/assets/10-åˆ†å¸ƒå¼é”.html-CAy0cIJP.js" as="script"><link rel="prefetch" href="/assets/2-å­—èŠ‚ç æ–‡ä»¶.html-B5N7A_3w.js" as="script"><link rel="prefetch" href="/assets/20_nio.html-DhG36gbC.js" as="script"><link rel="prefetch" href="/assets/21_NettyåŸºç¡€.html-DxYEcRpu.js" as="script"><link rel="prefetch" href="/assets/22_Nettyè¿›é˜¶.html-_nWwZTZ0.js" as="script"><link rel="prefetch" href="/assets/3-ç±»åŠ è½½å™¨.html-BlWWXgk6.js" as="script"><link rel="prefetch" href="/assets/30_åå°„å’ŒåŠ¨æ€ä»£ç†.html-BP-uMOqL.js" as="script"><link rel="prefetch" href="/assets/4_åƒåœ¾å›æ”¶.html-2ski5QK6.js" as="script"><link rel="prefetch" href="/assets/index.html-CgFPxyUV.js" as="script"><link rel="prefetch" href="/assets/2_esåŸºç¡€.html-DDg0McBx.js" as="script"><link rel="prefetch" href="/assets/3_esDSL.html-tlpw-S1o.js" as="script"><link rel="prefetch" href="/assets/4_elasticSearchä¸MySQLæ•°æ®åŒæ­¥.html-AYtaz7kJ.js" as="script"><link rel="prefetch" href="/assets/5_ESé›†ç¾¤.html-CEFhLvcJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DSPMfe4i.js" as="script"><link rel="prefetch" href="/assets/10_è‡ªåŠ¨è£…é…åŸç†.html-DrelTKV4.js" as="script"><link rel="prefetch" href="/assets/11_springsecurity.html-C_GXYqtP.js" as="script"><link rel="prefetch" href="/assets/12_springsecurity2.html-BZpkURuL.js" as="script"><link rel="prefetch" href="/assets/9_äº‹åŠ¡.html-FEO-PPPT.js" as="script"><link rel="prefetch" href="/assets/IOC.html-BdJigsUs.js" as="script"><link rel="prefetch" href="/assets/index.html-DJk-ZCA_.js" as="script"><link rel="prefetch" href="/assets/SpringTask_7.html-BpNM6EmS.js" as="script"><link rel="prefetch" href="/assets/aop.html-CbXarng2.js" as="script"><link rel="prefetch" href="/assets/jwt.html-oMrEE4io.js" as="script"><link rel="prefetch" href="/assets/websocket_8.html-BNEOAp5h.js" as="script"><link rel="prefetch" href="/assets/æ‹¦æˆªå™¨è¿‡æ»¤å™¨.html-CItA9NyK.js" as="script"><link rel="prefetch" href="/assets/ç¼“å­˜.html-C5DBssBR.js" as="script"><link rel="prefetch" href="/assets/10_minio.html-jen8Ydai.js" as="script"><link rel="prefetch" href="/assets/11_xxl-job.html-D4n3U8Ri.js" as="script"><link rel="prefetch" href="/assets/12_kafka.html-BDy-7Qr1.js" as="script"><link rel="prefetch" href="/assets/6_æœåŠ¡ä¿æŠ¤.html-xIcfCG1o.js" as="script"><link rel="prefetch" href="/assets/7_åˆ†å¸ƒå¼äº‹åŠ¡.html-B0M5QFgg.js" as="script"><link rel="prefetch" href="/assets/8_MQåŸºç¡€.html-Bevl5DEC.js" as="script"><link rel="prefetch" href="/assets/9_MQé«˜çº§.html-D4-Hg0sn.js" as="script"><link rel="prefetch" href="/assets/index.html-C5z_UP9g.js" as="script"><link rel="prefetch" href="/assets/æœåŠ¡æ³¨å†Œä¸è¿œç¨‹è°ƒç”¨.html-DTEKO6k2.js" as="script"><link rel="prefetch" href="/assets/ç»Ÿä¸€ç½‘å…³è·¯ç”±_4.html-BGA-SMrE.js" as="script"><link rel="prefetch" href="/assets/é…ç½®ç®¡ç†_5.html-t5QlxEZJ.js" as="script"><link rel="prefetch" href="/assets/10_MyBatis.html-DXIbOl7K.js" as="script"><link rel="prefetch" href="/assets/11_MyBatisPlus.html-4ziS6Q6r.js" as="script"><link rel="prefetch" href="/assets/15_MySQLé«˜çº§1.html-BC7RgHyR.js" as="script"><link rel="prefetch" href="/assets/20_redis.html-C6iXhCLh.js" as="script"><link rel="prefetch" href="/assets/21_redisæ•°æ®ç»“æ„.html-C3Ywr-3a.js" as="script"><link rel="prefetch" href="/assets/22_rediså•æœº.html-DzlE5lq1.js" as="script"><link rel="prefetch" href="/assets/23_rediså¤šæœº.html-CebQ9SXm.js" as="script"><link rel="prefetch" href="/assets/24_redisç‹¬ç«‹åŠŸèƒ½.html-LO1Hd_L3.js" as="script"><link rel="prefetch" href="/assets/2_mysqlä¸»ä»åŒæ­¥.html-D0zwAOji.js" as="script"><link rel="prefetch" href="/assets/3_è¯»å†™åˆ†ç¦».html-Dduiei3f.js" as="script"><link rel="prefetch" href="/assets/4_canal.html-u0LDZm7j.js" as="script"><link rel="prefetch" href="/assets/index.html-DYAX1ogm.js" as="script"><link rel="prefetch" href="/assets/index.html-BIunsxgX.js" as="script"><link rel="prefetch" href="/assets/æ±‡ç¼–æŒ‡ä»¤.html-CVkhNVsO.js" as="script"><link rel="prefetch" href="/assets/index.html-DdIHWBhp.js" as="script"><link rel="prefetch" href="/assets/1_dlxèˆè¹ˆé“¾.html-1NnK7_nq.js" as="script"><link rel="prefetch" href="/assets/2_Aæ˜Ÿç®—æ³•.html-ChfiCyxS.js" as="script"><link rel="prefetch" href="/assets/3_å­—ç¬¦ä¸²åŒ¹é….html-hB0AU6TT.js" as="script"><link rel="prefetch" href="/assets/index.html-Db_Rtl9R.js" as="script"><link rel="prefetch" href="/assets/index.html-C737fE8l.js" as="script"><link rel="prefetch" href="/assets/1_çƒ­æ–‡ç« è®¡ç®—.html-1vFW8AzH.js" as="script"><link rel="prefetch" href="/assets/index.html-W0kxKzO4.js" as="script"><link rel="prefetch" href="/assets/index.html-6vezI9fe.js" as="script"><link rel="prefetch" href="/assets/ç«ä»·æœç´¢.html-BErj2NQQ.js" as="script"><link rel="prefetch" href="/assets/index.html-00GJho3w.js" as="script"><link rel="prefetch" href="/assets/index.html-CsJ9KLDf.js" as="script"><link rel="prefetch" href="/assets/3_è®¤è¯æˆæƒ.html-QOeV-JDk.js" as="script"><link rel="prefetch" href="/assets/5_é¡¹ç›®ä¼˜åŒ–.html-CA4vvdO_.js" as="script"><link rel="prefetch" href="/assets/6_é¡¹ç›®æ€»ç»“.html-BB1IvPMo.js" as="script"><link rel="prefetch" href="/assets/index.html-CmJg-9Ym.js" as="script"><link rel="prefetch" href="/assets/404.html-CqZBsNJN.js" as="script"><link rel="prefetch" href="/assets/index.html-DfqZQ8B9.js" as="script"><link rel="prefetch" href="/assets/index.html-iParzFxf.js" as="script"><link rel="prefetch" href="/assets/index.html-_1J-rVbq.js" as="script"><link rel="prefetch" href="/assets/index.html-CkS0K305.js" as="script"><link rel="prefetch" href="/assets/index.html-BCYerMve.js" as="script"><link rel="prefetch" href="/assets/index.html-BMeIhX3R.js" as="script"><link rel="prefetch" href="/assets/index.html-CkmmCa2J.js" as="script"><link rel="prefetch" href="/assets/index.html-DmeLu1tn.js" as="script"><link rel="prefetch" href="/assets/index.html-MWGLCRBR.js" as="script"><link rel="prefetch" href="/assets/index.html-CoDux3_O.js" as="script"><link rel="prefetch" href="/assets/index.html-dZtuvhdu.js" as="script"><link rel="prefetch" href="/assets/index.html-SmolELif.js" as="script"><link rel="prefetch" href="/assets/index.html-B3TjswA1.js" as="script"><link rel="prefetch" href="/assets/index.html-BVW98weR.js" as="script"><link rel="prefetch" href="/assets/index.html-D2glAkmV.js" as="script"><link rel="prefetch" href="/assets/index.html-DOBofjCt.js" as="script"><link rel="prefetch" href="/assets/index.html-RTUFAGvc.js" as="script"><link rel="prefetch" href="/assets/index.html-H21Ua5eY.js" as="script"><link rel="prefetch" href="/assets/index.html-Cn0jEzE9.js" as="script"><link rel="prefetch" href="/assets/index.html-Cu8uDoRM.js" as="script"><link rel="prefetch" href="/assets/index.html-Dt3X3Chi.js" as="script"><link rel="prefetch" href="/assets/index.html-CHCoytc7.js" as="script"><link rel="prefetch" href="/assets/index.html-Co4nTAr7.js" as="script"><link rel="prefetch" href="/assets/index.html-DZ4TLr6c.js" as="script"><link rel="prefetch" href="/assets/index.html-J1AM4XOb.js" as="script"><link rel="prefetch" href="/assets/index.html-ntaHcrZN.js" as="script"><link rel="prefetch" href="/assets/index.html-0R8uWstr.js" as="script"><link rel="prefetch" href="/assets/index.html-C0fcT5mY.js" as="script"><link rel="prefetch" href="/assets/index.html-Che68nn7.js" as="script"><link rel="prefetch" href="/assets/index.html-Cxq2M5FS.js" as="script"><link rel="prefetch" href="/assets/index.html-Cclbdo6L.js" as="script"><link rel="prefetch" href="/assets/index.html-DlGLBvQL.js" as="script"><link rel="prefetch" href="/assets/index.html-DEIKm2Ts.js" as="script"><link rel="prefetch" href="/assets/index.html-Ch6yK3Yq.js" as="script"><link rel="prefetch" href="/assets/index.html-bAZ3CwTT.js" as="script"><link rel="prefetch" href="/assets/index.html-BLyEcXnB.js" as="script"><link rel="prefetch" href="/assets/index.html-BDhZLaj6.js" as="script"><link rel="prefetch" href="/assets/index.html-DLdcD34a.js" as="script"><link rel="prefetch" href="/assets/index.html-D7Jv2_Og.js" as="script"><link rel="prefetch" href="/assets/index.html-CvBa7ix9.js" as="script"><link rel="prefetch" href="/assets/index.html-C5Jyv1Wq.js" as="script"><link rel="prefetch" href="/assets/index.html-g5_vp4CF.js" as="script"><link rel="prefetch" href="/assets/waline-meta-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/component-DyhWhN1H.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">Lance</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link vp-link" href="/" aria-label="HOME"><img class="icon" src="/img/home.svg" alt aria-hidden no-view style="">HOME<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åŸºç¡€çŸ¥è¯†"><!--[--><img class="icon" src="/img/computer.svg" alt aria-hidden no-view style="">åŸºç¡€çŸ¥è¯†<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" aria-label="æ“ä½œç³»ç»Ÿ"><img class="icon" src="/img/æ“ä½œç³»ç»Ÿ.svg" alt aria-hidden no-view style="">æ“ä½œç³»ç»Ÿ<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" aria-label="è®¡ç®—æœºç½‘ç»œ"><img class="icon" src="/img/ç½‘ç»œè®¡ç®—æœº.svg" alt aria-hidden no-view style="">è®¡ç®—æœºç½‘ç»œ<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" aria-label="æ•°æ®ç»“æ„"><img class="icon" src="/img/æ•°æ®ç»“æ„.svg" alt aria-hidden no-view style="">æ•°æ®ç»“æ„<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E7%AE%97%E6%B3%95/" aria-label="ç®—æ³•"><img class="icon" src="/img/ç®—æ³•.svg" alt aria-hidden no-view style="">ç®—æ³•<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åç«¯"><!--[--><img class="icon" src="/img/spring.svg" alt aria-hidden no-view style="">åç«¯<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%90%8E%E7%AB%AF/Java/" aria-label="JavaåŸºç¡€"><img class="icon" src="/img/java.svg" alt aria-hidden no-view style="">JavaåŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%90%8E%E7%AB%AF/GoLang/" aria-label="GoLangåŸºç¡€"><img class="icon" src="/img/golang.svg" alt aria-hidden no-view style="">GoLangåŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link active vp-link" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-label="æ•°æ®åº“"><img class="icon" src="/img/æ•°æ®åº“.svg" alt aria-hidden no-view style="">æ•°æ®åº“<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%90%8E%E7%AB%AF/springboot/" aria-label="åç«¯"><img class="icon" src="/img/SPRINGBOOT.svg" alt aria-hidden no-view style="">åç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/" aria-label="å¾®æœåŠ¡"><img class="icon" src="/img/SpringCloud.svg" alt aria-hidden no-view style="">å¾®æœåŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%90%8E%E7%AB%AF/elasticSearch/" aria-label="ELK"><img class="icon" src="/img/Elastic.svg" alt aria-hidden no-view style="">ELK<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å·¥å…·"><!--[--><img class="icon" src="/img/tool.svg" alt aria-hidden no-view style="">å·¥å…·<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%B7%A5%E5%85%B7/Markdown.html" aria-label="Markdown"><img class="icon" src="/img/markdown.svg" alt aria-hidden no-view style="">Markdown<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%B7%A5%E5%85%B7/latexMath.html" aria-label="Latexå…¬å¼"><img class="icon" src="/img/latex.svg" alt aria-hidden no-view style="">Latexå…¬å¼<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%B7%A5%E5%85%B7/Git.html" aria-label="Git"><img class="icon" src="/img/git.svg" alt aria-hidden no-view style="">Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E5%B7%A5%E5%85%B7/Docker.html" aria-label="Docker"><img class="icon" src="/img/docker.svg" alt aria-hidden no-view style="">Docker<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="é¡¹ç›®"><!--[--><img class="icon" src="/img/é¡¹ç›®.svg" alt aria-hidden no-view style="">é¡¹ç›®<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E9%A1%B9%E7%9B%AE/skytakeout/" aria-label="è‹ç©¹å¤–å–"><img class="icon" src="/img/å¤–å–.svg" alt aria-hidden no-view style="">è‹ç©¹å¤–å–<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E9%A1%B9%E7%9B%AE/hmall/" aria-label="é»‘é©¬å•†åŸ"><img class="icon" src="/img/å•†åŸ.svg" alt aria-hidden no-view style="">é»‘é©¬å•†åŸ<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E9%A1%B9%E7%9B%AE/heimaLeadnews/" aria-label="é»‘é©¬å¤´æ¡"><img class="icon" src="/img/å¤´æ¡.svg" alt aria-hidden no-view style="">é»‘é©¬å¤´æ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E9%A1%B9%E7%9B%AE/studyOnline/" aria-label="å­¦æˆåœ¨çº¿"><img class="icon" src="/img/æ•™è‚².svg" alt aria-hidden no-view style="">å­¦æˆåœ¨çº¿<!----></a></li><li class="vp-dropdown-item"><a class="route-link vp-link" href="/posts/%E9%A1%B9%E7%9B%AE/shortService/" aria-label="çŸ­é“¾æ¥ç³»ç»Ÿ"><img class="icon" src="/img/link.svg" alt aria-hidden no-view style="">çŸ­é“¾æ¥ç³»ç»Ÿ<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/weiruyi" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><img class="icon" src="/img/java.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">JavaåŸºç¡€</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/" aria-label="JVM"><img class="icon" src="/img/JVM.svg" alt aria-hidden no-view style="">JVM<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/2-%E5%AD%97%E8%8A%82%E7%A0%81%E6%96%87%E4%BB%B6.html" aria-label="å­—èŠ‚ç æ–‡ä»¶"><img class="icon" src="/img/JVM.svg" alt aria-hidden no-view style="">å­—èŠ‚ç æ–‡ä»¶<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/3-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.html" aria-label="ç±»åŠ è½½å™¨"><img class="icon" src="/img/JVM.svg" alt aria-hidden no-view style="">ç±»åŠ è½½å™¨<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/4_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" aria-label="åƒåœ¾å›æ”¶"><img class="icon" src="/img/JVM.svg" alt aria-hidden no-view style="">åƒåœ¾å›æ”¶<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/10-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html" aria-label="åˆ†å¸ƒå¼é”"><img class="icon" src="/img/lock.svg" alt aria-hidden no-view style="">åˆ†å¸ƒå¼é”<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/20_nio.html" aria-label="NIO"><img class="icon" src="/img/java.svg" alt aria-hidden no-view style="">NIO<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/21_Netty%E5%9F%BA%E7%A1%80.html" aria-label="NettyåŸºç¡€"><!---->NettyåŸºç¡€<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/22_Netty%E8%BF%9B%E9%98%B6.html" aria-label="Nettyè¿›é˜¶"><!---->Nettyè¿›é˜¶<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/Java/30_%E5%8F%8D%E5%B0%84%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86.html" aria-label="Javaåå°„å’ŒåŠ¨æ€ä»£ç†è¯¦è§£"><img class="icon" src="/img/JVM.svg" alt aria-hidden no-view style="">Javaåå°„å’ŒåŠ¨æ€ä»£ç†è¯¦è§£<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><img class="icon" src="/img/golang.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">GoLangåŸºç¡€</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/GoLang/" aria-label="GoLang"><img class="icon" src="/img/golang.svg" alt aria-hidden no-view style="">GoLang<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/GoLang/2_go%E9%94%81%E6%9C%BA%E5%88%B6.html" aria-label="GoLangé”æœºåˆ¶"><img class="icon" src="/img/golang.svg" alt aria-hidden no-view style="">GoLangé”æœºåˆ¶<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><img class="icon" src="/img/æ•°æ®åº“.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">æ•°æ®åº“</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-label="SQLè¯­å¥"><img class="icon" src="/img/SQL.svg" alt aria-hidden no-view style="">SQLè¯­å¥<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/2_mysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5.html" aria-label="MySQLä¸»ä»åŒæ­¥"><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">MySQLä¸»ä»åŒæ­¥<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/3_%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html" aria-label="MySQLè¯»å†™åˆ†ç¦»"><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">MySQLè¯»å†™åˆ†ç¦»<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/4_canal.html" aria-label="Canalæ•°æ®åŒæ­¥"><img class="icon" src="/img/æ•°æ®åŒæ­¥.svg" alt aria-hidden no-view style="">Canalæ•°æ®åŒæ­¥<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/10_MyBatis.html" aria-label="MyBatis"><img class="icon" src="/img/mybatis.svg" alt aria-hidden no-view style="">MyBatis<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/11_MyBatisPlus.html" aria-label="MyBatisPlus"><img class="icon" src="/img/mybatisplus.svg" alt aria-hidden no-view style="">MyBatisPlus<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/15_MySQL%E9%AB%98%E7%BA%A71.html" aria-label="MySQLé«˜çº§ä¸€"><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">MySQLé«˜çº§ä¸€<!----></a></li><li><a class="route-link active vp-link vp-sidebar-link vp-sidebar-page active" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/16_mysql%E9%AB%98%E7%BA%A72.html" aria-label="MySQLé«˜çº§äºŒ"><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">MySQLé«˜çº§äºŒ<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/20_redis.html" aria-label="RedisåŸºç¡€"><img class="icon" src="/img/redis.svg" alt aria-hidden no-view style="">RedisåŸºç¡€<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/21_redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="Redisæ•°æ®ç»“æ„"><img class="icon" src="/img/redis.svg" alt aria-hidden no-view style="">Redisæ•°æ®ç»“æ„<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/22_redis%E5%8D%95%E6%9C%BA.html" aria-label="Rediså•æœº"><img class="icon" src="/img/redis.svg" alt aria-hidden no-view style="">Rediså•æœº<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/23_redis%E5%A4%9A%E6%9C%BA.html" aria-label="Rediså¤šæœº"><img class="icon" src="/img/redis.svg" alt aria-hidden no-view style="">Rediså¤šæœº<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/24_redis%E7%8B%AC%E7%AB%8B%E5%8A%9F%E8%83%BD.html" aria-label="Redisç‹¬ç«‹åŠŸèƒ½"><img class="icon" src="/img/redis.svg" alt aria-hidden no-view style="">Redisç‹¬ç«‹åŠŸèƒ½<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><img class="icon" src="/img/SPRINGBOOT.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">åç«¯</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/" aria-label="Spring"><img class="icon" src="/img/spring.svg" alt aria-hidden no-view style="">Spring<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/IOC.html" aria-label="IOC"><img class="icon" src="/img/spring.svg" alt aria-hidden no-view style="">IOC<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/aop.html" aria-label="AOP"><img class="icon" src="/img/spring.svg" alt aria-hidden no-view style="">AOP<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/jwt.html" aria-label="JWTä»¤ç‰Œä»¥åŠç™»å½•éªŒè¯"><img class="icon" src="/img/jwt.svg" alt aria-hidden no-view style="">JWTä»¤ç‰Œä»¥åŠç™»å½•éªŒè¯<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/%E6%8B%A6%E6%88%AA%E5%99%A8%E8%BF%87%E6%BB%A4%E5%99%A8.html" aria-label="æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨"><img class="icon" src="/img/æ‹¦æˆªå™¨.svg" alt aria-hidden no-view style="">æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/%E7%BC%93%E5%AD%98.html" aria-label="SpringCacheç¼“å­˜"><img class="icon" src="/img/spring.svg" alt aria-hidden no-view style="">SpringCacheç¼“å­˜<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/SpringTask_7.html" aria-label="SpringTask"><img class="icon" src="/img/å®šæ—¶ä»»åŠ¡.svg" alt aria-hidden no-view style="">SpringTask<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/websocket_8.html" aria-label="WebSocket"><img class="icon" src="/img/WebSocket.svg" alt aria-hidden no-view style="">WebSocket<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/9_%E4%BA%8B%E5%8A%A1.html" aria-label="Springäº‹åŠ¡"><img class="icon" src="/img/spring.svg" alt aria-hidden no-view style="">Springäº‹åŠ¡<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/10_%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E5%8E%9F%E7%90%86.html" aria-label="SpringBootè‡ªåŠ¨è£…é…åŸç†"><img class="icon" src="/img/SPRINGBOOT.svg" alt aria-hidden no-view style="">SpringBootè‡ªåŠ¨è£…é…åŸç†<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/11_springsecurity.html" aria-label="SpringSecurity"><img class="icon" src="/img/spring-security.svg" alt aria-hidden no-view style="">SpringSecurity<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springboot/12_springsecurity2.html" aria-label="SpringSecurityè¿›é˜¶"><img class="icon" src="/img/spring-security.svg" alt aria-hidden no-view style="">SpringSecurityè¿›é˜¶<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><img class="icon" src="/img/SpringCloud.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">å¾®æœåŠ¡</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/" aria-label="å¾®æœåŠ¡"><img class="icon" src="/img/SpringCloud.svg" alt aria-hidden no-view style="">å¾®æœåŠ¡<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8.html" aria-label="æœåŠ¡æ³¨å†Œä¸è¿œç¨‹è°ƒç”¨"><img class="icon" src="/img/nacos.svg" alt aria-hidden no-view style="">æœåŠ¡æ³¨å†Œä¸è¿œç¨‹è°ƒç”¨<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/%E7%BB%9F%E4%B8%80%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1_4.html" aria-label="ç»Ÿä¸€ç½‘å…³è·¯ç”±"><img class="icon" src="/img/ç½‘å…³.svg" alt aria-hidden no-view style="">ç»Ÿä¸€ç½‘å…³è·¯ç”±<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86_5.html" aria-label="é…ç½®ç®¡ç†"><img class="icon" src="/img/nacos.svg" alt aria-hidden no-view style="">é…ç½®ç®¡ç†<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/6_%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4.html" aria-label="æœåŠ¡ä¿æŠ¤"><img class="icon" src="/img/sentinel.svg" alt aria-hidden no-view style="">æœåŠ¡ä¿æŠ¤<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/7_%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡"><img class="icon" src="/img/seata.svg" alt aria-hidden no-view style="">åˆ†å¸ƒå¼äº‹åŠ¡<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/8_MQ%E5%9F%BA%E7%A1%80.html" aria-label="MQåŸºç¡€"><img class="icon" src="/img/rabbitmq.svg" alt aria-hidden no-view style="">MQåŸºç¡€<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/9_MQ%E9%AB%98%E7%BA%A7.html" aria-label="MQé«˜çº§"><img class="icon" src="/img/rabbitmq.svg" alt aria-hidden no-view style="">MQé«˜çº§<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/10_minio.html" aria-label="MinIOåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"><img class="icon" src="/img/MinIO.svg" alt aria-hidden no-view style="">MinIOåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/11_xxl-job.html" aria-label="XXL-JOBåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦"><img class="icon" src="/img/xxl-job.svg" alt aria-hidden no-view style="">XXL-JOBåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/springcloud/12_kafka.html" aria-label="Kafkaè¯¦è§£"><img class="icon" src="/img/Kafka.svg" alt aria-hidden no-view style="">Kafkaè¯¦è§£<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><img class="icon" src="/img/Elastic.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">ELK</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/elasticSearch/" aria-label="ELK"><img class="icon" src="/img/Elastic.svg" alt aria-hidden no-view style="">ELK<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/elasticSearch/2_es%E5%9F%BA%E7%A1%80.html" aria-label="ElasticSearchåŸºç¡€"><img class="icon" src="/img/es.svg" alt aria-hidden no-view style="">ElasticSearchåŸºç¡€<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/elasticSearch/3_esDSL.html" aria-label="ElasticSearch DSL"><img class="icon" src="/img/es.svg" alt aria-hidden no-view style="">ElasticSearch DSL<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/elasticSearch/4_elasticSearch%E4%B8%8EMySQL%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5.html" aria-label="ESä¸MySQLæ•°æ®åŒæ­¥"><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">ESä¸MySQLæ•°æ®åŒæ­¥<!----></a></li><li><a class="route-link vp-link vp-sidebar-link vp-sidebar-page" href="/posts/%E5%90%8E%E7%AB%AF/elasticSearch/5_ES%E9%9B%86%E7%BE%A4.html" aria-label="ESé›†ç¾¤"><img class="icon" src="/img/es.svg" alt aria-hidden no-view style="">ESé›†ç¾¤<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">MySQLé«˜çº§äºŒ</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">RuyiWei</span></span><span property="author" content="RuyiWei"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-11-22T16:14:58.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon" name="eye"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="vp-pageview waline-pageview-count" data-path="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/16_mysql%E9%AB%98%E7%BA%A72.html" data-page-key="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/16_mysql%E9%AB%98%E7%BA%A72.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 40 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT40M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color7 clickable" role="navigation">æ•°æ®åº“</span><!--]--><meta property="articleSection" content="æ•°æ®åº“"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color1 clickable" role="navigation">mysql</span><!--]--><meta property="keywords" content="mysql"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€é”">ä¸€ã€é”</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€å…¨å±€é”">1ã€å…¨å±€é”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€è¡¨çº§é”">2ã€è¡¨çº§é”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€è¡Œçº§é”">3ã€è¡Œçº§é”</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äºŒã€innodbå¼•æ“">äºŒã€InnoDBå¼•æ“</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€é€»è¾‘å­˜å‚¨ç»“æ„">1ã€é€»è¾‘å­˜å‚¨ç»“æ„</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€innodbè®°å½•æ ¼å¼">2ã€InnoDBè®°å½•æ ¼å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€innodbæ•°æ®é¡µ">3ã€InnoDBæ•°æ®é¡µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4ã€æ¶æ„">4ã€æ¶æ„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸‰ã€buffer-poolè¯¦è§£">ä¸‰ã€Buffer Poolè¯¦è§£</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€ä¸ºä»€ä¹ˆè¦æœ‰-buffer-pool">1ã€ä¸ºä»€ä¹ˆè¦æœ‰ Buffer Poolï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€buffer-poolç¼“å­˜ä»€ä¹ˆ">2ã€Buffer Poolç¼“å­˜ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€å¦‚ä½•ç®¡ç†-buffer-pool">3ã€å¦‚ä½•ç®¡ç† Buffer Poolï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å››ã€äº‹åŠ¡åŸç†">å››ã€äº‹åŠ¡åŸç†</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1ã€äº‹åŠ¡åŸºç¡€">1ã€äº‹åŠ¡åŸºç¡€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2ã€mvccåŸºæœ¬æ¦‚å¿µ">2ã€MVCCåŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3ã€éšè—å­—æ®µ">3ã€éšè—å­—æ®µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4ã€undo-log">4ã€undo log</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5ã€readview">5ã€readview</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6ã€éš”ç¦»çº§åˆ«">6ã€éš”ç¦»çº§åˆ«</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><!--more---><h1 id="mysqlé«˜çº§äºŒ" tabindex="-1"><a class="header-anchor" href="#mysqlé«˜çº§äºŒ"><span>MySQLé«˜çº§äºŒ</span></a></h1><h2 id="ä¸€ã€é”" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€é”"><span>ä¸€ã€é”</span></a></h2><p>é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œé™¤ä¼ ç»Ÿçš„è®¡ç®—èµ„æºï¼ˆCPUã€RAMã€I/Oï¼‰çš„äº‰ç”¨ä»¥å¤–ï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«çš„èµ„æºã€‚å¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§æ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œé”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚</p><ul><li>InnoDBæŒ‰ç…§é”çš„ç²’åº¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š <ul><li>è¡Œçº§é”ï¼šæ¯æ¬¡æ“ä½œé”ä½ä¸€æ¡è¡Œæ•°æ®</li><li>è¡¨çº§é”ï¼šæ¯æ¬¡æ“ä½œé”ä½æ•´å¼ è¡¨</li><li>å…¨å±€é”ï¼šé”å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨</li></ul></li><li>MyISAMã€Memoryç­‰å¼•æ“ä»…æ”¯æŒè¡¨çº§é”ï¼Œä¸”ä¸æ”¯æŒäº‹åŠ¡ï¼Œå› æ­¤é€‚ç”¨äºåªè¯»æˆ–ä»¥è¯»ä¸ºä¸»çš„åœºæ™¯</li></ul><h3 id="_1ã€å…¨å±€é”" tabindex="-1"><a class="header-anchor" href="#_1ã€å…¨å±€é”"><span>1ã€å…¨å±€é”</span></a></h3><p>å…¨å±€é”å°±æ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ï¼ŒåŠ é”åæ•´ä¸ªå®ä¾‹å°±å¤„äºåªè¯»çŠ¶æ€ï¼Œåç»­çš„DMLçš„å†™è¯­å¥ï¼ŒDDLè¯­å¥ï¼Œå·²ç»æ›´æ–°æ“ä½œçš„äº‹åŠ¡æäº¤è¯­å¥éƒ½å°†è¢«é˜»å¡ã€‚</p><ul><li>å…¶å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯åšå…¨åº“çš„é€»è¾‘å¤‡ä»½ï¼Œå¯¹æ‰€æœ‰çš„è¡¨è¿›è¡Œé”å®šï¼Œä»è€Œè·å–ä¸€è‡´æ€§è§†å›¾ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</li></ul><p><strong>è¯­æ³•:</strong></p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">-- åŠ é”</span>
flush <span class="token keyword">tables</span> <span class="token keyword">with</span> <span class="token keyword">read</span> <span class="token keyword">lock</span> <span class="token punctuation">;</span>

<span class="token comment">-- æ•°æ®å¤‡ä»½</span>
mysqldump <span class="token operator">-</span>uroot â€“p1234 itcast <span class="token operator">&gt;</span> itcast<span class="token punctuation">.</span><span class="token keyword">sql</span>

<span class="token comment">-- é‡Šæ”¾é”</span>
<span class="token keyword">unlock</span> <span class="token keyword">tables</span> <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®åº“ä¸­åŠ å…¨å±€é”ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡çš„æ“ä½œï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><p>å¦‚æœåœ¨ä¸»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´éƒ½ä¸èƒ½æ‰§è¡Œæ›´æ–°ï¼Œä¸šåŠ¡åŸºæœ¬ä¸Šå°±å¾—åœæ‘†ã€‚</p></li><li><p>å¦‚æœåœ¨ä»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´ä»åº“ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥è¿‡æ¥çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰ï¼Œä¼šå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚</p></li></ul><p>åœ¨InnoDBå¼•æ“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤‡ä»½æ—¶åŠ ä¸Šå‚æ•° <code>--single-transaction</code> å‚æ•°æ¥å®Œæˆä¸åŠ é”çš„ä¸€è‡´æ€§æ•°æ®å¤‡ä»½ã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>mysqldump <span class="token comment">--single-transaction -uroot â€“p123456 itcast &gt; itcast.sql</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2ã€è¡¨çº§é”" tabindex="-1"><a class="header-anchor" href="#_2ã€è¡¨çº§é”"><span>2ã€è¡¨çº§é”</span></a></h3><p>è¡¨çº§é”ï¼Œæ¯æ¬¡æ“ä½œé”ä½æ•´å¼ è¡¨ã€‚é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚åº”ç”¨åœ¨MyISAMã€InnoDBã€BDBç­‰å­˜å‚¨å¼•æ“ä¸­ã€‚</p><p>å¯¹äºè¡¨çº§é”ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ul><li><p>è¡¨é”</p></li><li><p>å…ƒæ•°æ®é”ï¼ˆmeta data lockï¼ŒMDLï¼‰</p></li><li><p>æ„å‘é”</p></li></ul><h4 id="_1-è¡¨é”" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨é”"><span>1)è¡¨é”</span></a></h4><p>å¯¹äºè¡¨é”ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li><p>è¡¨å…±äº«è¯»é”ï¼ˆread lockï¼‰</p></li><li><p>è¡¨ç‹¬å å†™é”ï¼ˆwrite lockï¼‰</p></li></ul><p>è¯­æ³•ï¼š</p><ul><li><p>åŠ é”ï¼š<code>lock tables è¡¨å... read/write;</code></p></li><li><p>é‡Šæ”¾é”ï¼š<code>unlock tables; / å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ </code></p></li></ul><p><strong>è¯»é”ä¸ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„è¯»ï¼Œä½†æ˜¯ä¼šé˜»å¡å†™ã€‚å†™é”æ—¢ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„è¯»ï¼Œåˆä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„å†™ã€‚</strong></p><h4 id="_2-å…ƒæ•°æ®é”" tabindex="-1"><a class="header-anchor" href="#_2-å…ƒæ•°æ®é”"><span>2)å…ƒæ•°æ®é”</span></a></h4><p>å…ƒæ•°æ®é” meta data lock , å…ƒæ•°æ®é”ï¼Œç®€å†™MDLã€‚MDLåŠ é”è¿‡ç¨‹æ˜¯ç³»ç»Ÿè‡ªåŠ¨æ§åˆ¶ï¼Œæ— éœ€æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€å¼ è¡¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Šã€‚MDLé”ä¸»è¦ä½œç”¨æ˜¯ç»´æŠ¤è¡¨å…ƒæ•°æ®çš„æ•°æ®ä¸€è‡´æ€§ï¼Œåœ¨è¡¨ä¸Šæœ‰æ´»åŠ¨äº‹åŠ¡çš„æ—¶å€™ï¼Œä¸å¯ä»¥å¯¹å…ƒæ•°æ®è¿›è¡Œå†™å…¥æ“ä½œã€‚ä¸ºäº†é¿å…<strong>DML</strong>ä¸ <strong>DDL</strong>å†²çªï¼Œä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚</p><blockquote><p>è¿™é‡Œçš„å…ƒæ•°æ®ï¼Œå¤§å®¶å¯ä»¥ç®€å•ç†è§£ä¸ºå°±æ˜¯ä¸€å¼ è¡¨çš„è¡¨ç»“æ„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸä¸€å¼ è¡¨æ¶‰åŠåˆ°æœªæäº¤çš„äº‹åŠ¡æ—¶ï¼Œæ˜¯ä¸èƒ½å¤Ÿä¿®æ”¹è¿™å¼ è¡¨çš„è¡¨ç»“æ„çš„ã€‚</p></blockquote><p>åœ¨MySQL5.5ä¸­å¼•å…¥äº†MDLï¼Œå½“å¯¹ä¸€å¼ è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼ŒåŠ <strong>MDLè¯»é”(å…±äº«)</strong>ï¼›å½“å¯¹è¡¨ç»“æ„è¿›è¡Œå˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ <strong>MDLå†™é”(æ’ä»–)</strong>ã€‚</p><p>å…·ä½“SQLè¯­å¥çš„åŠ é”å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å¯¹åº”SQL</th><th>é”ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>lock tables xxx read /write</td><td>SHARED_READ_ONLY /SHARED_NO_READ_WRITE</td><td></td></tr><tr><td>select, select ... lock in share mode</td><td>SHARED_READ</td><td>ä¸SHARED_READã€SHARED_WRITEå…¼å®¹ï¼Œä¸EXCLUSIVEäº’æ–¥</td></tr><tr><td>insert ã€updateã€deleteã€select ... for update</td><td>SHARED_WRITE</td><td>ä¸SHARED_READã€SHARED_WRITEå…¼å®¹ï¼Œä¸EXCLUSIVEäº’æ–¥</td></tr><tr><td>alter table ...</td><td>EXCLUSIVE</td><td>ä¸å…¶ä»–çš„MDLéƒ½äº’æ–¥</td></tr></tbody></table><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„åŠ é”æƒ…å†µï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code> <span class="token keyword">select</span> object_type<span class="token punctuation">,</span> object_schema<span class="token punctuation">,</span> object_name<span class="token punctuation">,</span>lock_type<span class="token punctuation">,</span> lock_duration <span class="token keyword">from</span> performance_schema<span class="token punctuation">.</span>metadata_locks<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-æ„å‘é”" tabindex="-1"><a class="header-anchor" href="#_3-æ„å‘é”"><span>3)æ„å‘é”</span></a></h4><p>ä¸ºäº†é¿å…DMLåœ¨æ‰§è¡Œæ—¶ï¼ŒåŠ çš„è¡Œé”ä¸è¡¨é”å†²çªé€ æˆæ€§èƒ½é™ä½ï¼ŒInnoDBä¸­å¼•å…¥äº†æ„å‘é” Intention Lockï¼Œä½¿å¾—è¡¨é”ä¸ç”¨éå†æ¯è¡Œè®°å½•æ˜¯å¦åŠ é”ã€‚å¼•å…¥æ„å‘é”åï¼Œå¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯å¯¹æŸä¸€è¡ŒåŠ ä¸Šäº†è¡Œé”ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼š<strong>è‡ªåŠ¨å¯¹å…¶åŠ ä¸Šæ„å‘é”</strong>ï¼Œå½“åˆ«çš„å®¢æˆ·ç«¯è¯•å›¾å¯¹å…¶åŠ ä¸Šè¡¨é”æ—¶ï¼Œä¾¿ä¼šæ£€æŸ¥æ„å‘é”æ˜¯å¦å…¼å®¹ï¼Œè‹¥æ˜¯ä¸å…¼å®¹ï¼Œä¾¿ä¼šé˜»å¡ç›´åˆ°æ„å‘é”é‡Šæ”¾ã€‚</p><p><strong>åˆ†ç±»</strong></p><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šIntention Shared Lockï¼Œå½“äº‹åŠ¡å‡†å¤‡åœ¨æŸæ¡è®°å½•ä¸ŠåŠ Sé”æ—¶ï¼Œéœ€è¦å…ˆåœ¨è¡¨çº§åˆ«åŠ ISé”</li><li>æ„å‘æ’ä»–é”ï¼ˆlXï¼‰ï¼šIntention Exclusive Lockï¼Œå½“äº‹åŠ¡å‡†å¤‡åœ¨æŸæ¡è®°å½•ä¸ŠåŠ Xé”æ—¶ï¼Œéœ€è¦å…ˆåœ¨è¡¨çº§åˆ«åŠ IXé”</li></ul><p><strong>è¡¨é”å…¼å®¹æ€§</strong></p><table><thead><tr><th>å…¼å®¹æ€§</th><th>X</th><th>IX</th><th>S</th><th>IS</th></tr></thead><tbody><tr><td>X</td><td>ä¸å…¼å®¹</td><td>ä¸å…¼å®¹</td><td>ä¸å…¼å®¹</td><td>ä¸å…¼å®¹</td></tr><tr><td>IX</td><td>ä¸å…¼å®¹</td><td>å…¼å®¹</td><td>ä¸å…¼å®¹</td><td>å…¼å®¹</td></tr><tr><td>S</td><td>ä¸å…¼å®¹</td><td>ä¸å…¼å®¹</td><td>å…¼å®¹</td><td>å…¼å®¹</td></tr><tr><td>IS</td><td>ä¸å…¼å®¹</td><td>å…¼å®¹</td><td>å…¼å®¹</td><td>å…¼å®¹</td></tr></tbody></table><p>æ³¨ï¼šæ„å‘é”ä¹‹é—´ä¸ä¼šäº’æ–¥ã€‚ä¸€æ—¦äº‹åŠ¡æäº¤ï¼ŒISã€IX éƒ½ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</p><h3 id="_3ã€è¡Œçº§é”" tabindex="-1"><a class="header-anchor" href="#_3ã€è¡Œçº§é”"><span>3ã€è¡Œçº§é”</span></a></h3><p>è¡Œçº§é”ï¼Œæ¯æ¬¡æ“ä½œé”ä½å¯¹åº”çš„è¡Œæ•°æ®ã€‚é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦æœ€é«˜ã€‚åº”ç”¨åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ã€‚</p><p>InnoDBçš„æ•°æ®æ˜¯åŸºäºç´¢å¼•ç»„ç»‡çš„ï¼Œè¡Œé”æ˜¯é€šè¿‡å¯¹ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯å¯¹è®°å½•åŠ çš„é”ã€‚å¯¹äºè¡Œçº§é”ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ul><li>è¡Œé”ï¼ˆRecord Lockï¼‰ï¼šé”å®šå•ä¸ªè¡Œè®°å½•çš„é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹æ­¤è¡Œè¿›è¡Œupdateå’Œdeleteã€‚åœ¨RCã€RRéš”ç¦»çº§åˆ«ä¸‹éƒ½æ”¯æŒã€‚</li><li>é—´éš™é”ï¼ˆGap Lockï¼‰ï¼šé”å®šç´¢å¼•è®°å½•é—´éš™ï¼ˆä¸å«è¯¥è®°å½•ï¼‰ï¼Œç¡®ä¿ç´¢å¼•è®°å½•é—´éš™ä¸å˜ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªé—´éš™è¿›è¡Œinsertï¼Œäº§ç”Ÿå¹»è¯»ã€‚åœ¨RRéš”ç¦»çº§åˆ«ä¸‹éƒ½æ”¯æŒã€‚</li><li>ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰ï¼šè¡Œé”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶é”ä½æ•°æ®å‰é¢çš„é—´éš™Gapã€‚åœ¨RRéš”ç¦»çº§åˆ«ä¸‹æ”¯æŒã€‚</li></ul><h4 id="_1-è¡Œé”" tabindex="-1"><a class="header-anchor" href="#_1-è¡Œé”"><span>1)è¡Œé”</span></a></h4><p>InnoDBå®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ï¼š</p><ul><li><p>å…±äº«é”ï¼ˆSï¼‰ï¼šå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’å®ƒé”ã€‚</p></li><li><p>æ’ä»–é”ï¼ˆXï¼‰ï¼šå…è®¸è·å–æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«é”å’Œæ’ä»–é”ã€‚</p></li></ul><p><strong>å…±äº«é”ä¹‹é—´ç›¸äº’å…¼å®¹ï¼Œæ’å®ƒé”ä¸ä»»ä½•é”éƒ½ä¸å…¼å®¹ã€‚</strong></p><p><strong>è®°å½•é”SQLè¯­å¥</strong></p><table><thead><tr><th>SQL</th><th>è®°å½•é”ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>insert</td><td>éšå¼é”</td><td>ä¸€èˆ¬æƒ…å†µä¸åŠ è®°å½•é”</td></tr><tr><td>update</td><td>Xé”</td><td>è‡ªåŠ¨åŠ é”</td></tr><tr><td>delete</td><td>Xé”</td><td>è‡ªåŠ¨åŠ é”</td></tr><tr><td>select</td><td>ä¸åŠ é”</td><td></td></tr><tr><td>SELECT ... LOCK IN SHARE MODE</td><td>Sé”</td><td>éœ€æ‰‹åŠ¨åœ¨SELECTä¹‹ååŠ LOCK IN SHARE MODE</td></tr><tr><td>SELECT ... FOR UPDATE</td><td>Xé”</td><td>éœ€æ‰‹åŠ¨åœ¨SELECTä¹‹ååŠ FOR UPDATE</td></tr></tbody></table><h4 id="_2-é—´éš™é”" tabindex="-1"><a class="header-anchor" href="#_2-é—´éš™é”"><span>2)é—´éš™é”</span></a></h4><p>Gap Locksï¼ˆLOCK_GAPï¼‰é—´éš™é”å¯¹ç´¢å¼•è®°å½•é—´éš™ï¼ˆä¸å«è¯¥è®°å½•ï¼‰åŠ é”ï¼Œç¡®ä¿ç´¢å¼•è®°å½•é—´éš™ä¸å˜ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªé—´éš™æ’å…¥æ–°è®°å½•ã€‚</p><!----><ul><li>Gapé”å”¯ä¸€ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢äº§ç”Ÿå¹»è¯»</li><li>Gapé”å¯ä»¥å…±å­˜ï¼Œä¸ä¼šé™åˆ¶å…¶å®ƒäº‹åŠ¡åœ¨åŒä¸€é—´éš™ä¸ŠåŠ ä»»ä½•è¡Œé”</li><li>å¦‚æœè¦å¯¹ç´¢å¼•æœ«å°¾åŠ Gapé”ï¼Œå¯ä»¥å¯¹Supremumä¼ªè®°å½•åŠ Gapé”</li></ul><h4 id="_3-ä¸´é”®é”" tabindex="-1"><a class="header-anchor" href="#_3-ä¸´é”®é”"><span>3)ä¸´é”®é”</span></a></h4><p>Next-Key Locksï¼ˆLOCK_ORDINARYï¼‰ä¸´é”®é”æ˜¯è®°å½•é”å’Œé—´éš™é”çš„ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®å’Œæ•°æ®å‰é¢çš„é—´éš™ã€‚</p><!----><ul><li>åœ¨Repeatable Readéš”ç¦»çº§åˆ«ä¸‹æ”¯æŒ</li><li>é»˜è®¤æƒ…å†µä¸‹InnoDBä½¿ç”¨ä¸´é”®é”è¿›è¡Œæœç´¢å’Œç´¢å¼•æ‰«æï¼Œä»¥é˜²æ­¢å¹»è¯»ã€‚</li><li>ç´¢å¼•ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰ï¼Œç»™ä¸å­˜åœ¨çš„è®°å½•åŠ é”æ—¶ï¼Œä¼˜åŒ–ä¸ºé—´éš™é”ã€‚</li><li>ç´¢å¼•ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ï¼ˆæ™®é€šç´¢å¼•ï¼‰ï¼Œå‘å³éå†ï¼Œæœ€åä¸€ä¸ªå€¼ä¸æ»¡è¶³æŸ¥è¯¢éœ€æ±‚æ—¶ï¼Œä¸´é”®é”é€€åŒ–ä¸ºé—´éš™é”ã€‚</li></ul><p>æ­¤å¤–ï¼Œè¿˜æœ‰æ’å…¥æ„å‘é”ï¼ˆInsert Intention Locksï¼‰ç”¨äºå‘åŠ äº†gapé”çš„é—´éš™æ’å…¥æ–°è®°å½•æ—¶çš„ç­‰å¾…çŠ¶æ€ï¼Œéšå¼é”ä¾èµ–äº‹åŠ¡idä¿è¯æ’å…¥è®°å½•çš„å®‰å…¨</p><h2 id="äºŒã€innodbå¼•æ“" tabindex="-1"><a class="header-anchor" href="#äºŒã€innodbå¼•æ“"><span>äºŒã€InnoDBå¼•æ“</span></a></h2><h3 id="_1ã€é€»è¾‘å­˜å‚¨ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1ã€é€»è¾‘å­˜å‚¨ç»“æ„"><span>1ã€é€»è¾‘å­˜å‚¨ç»“æ„</span></a></h3><p>InnoDBçš„é€»è¾‘å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º:</p><!----><ul><li>è¡¨ç©ºé—´æ˜¯InnoDBå­˜å‚¨å¼•æ“é€»è¾‘ç»“æ„çš„æœ€é«˜å±‚ï¼Œ å¦‚æœç”¨æˆ·å¯ç”¨äº†å‚æ•° innodb_file_per_table(åœ¨8.0ç‰ˆæœ¬ä¸­é»˜è®¤å¼€å¯) ï¼Œåˆ™æ¯å¼ è¡¨éƒ½ä¼šæœ‰ä¸€ä¸ªè¡¨ç©ºé—´ï¼ˆxxx.ibdï¼‰ï¼Œä¸€ä¸ªmysqlå®ä¾‹å¯ä»¥å¯¹åº”å¤šä¸ªè¡¨ç©ºé—´ï¼Œç”¨äºå­˜å‚¨è®°å½•ã€ç´¢å¼•ç­‰æ•°æ®ã€‚</li><li>æ®µï¼Œåˆ†ä¸ºæ•°æ®æ®µï¼ˆLeaf node segmentï¼‰ã€ç´¢å¼•æ®µï¼ˆNon-leaf node segmentï¼‰ã€å›æ»šæ®µï¼ˆRollback segmentï¼‰ï¼ŒInnoDBæ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œæ•°æ®æ®µå°±æ˜¯B+æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œ ç´¢å¼•æ®µå³ä¸ºB+æ ‘çš„éå¶å­èŠ‚ç‚¹ã€‚æ®µç”¨æ¥ç®¡ç†å¤šä¸ªExtentï¼ˆåŒºï¼‰ã€‚</li><li>åŒºï¼Œè¡¨ç©ºé—´çš„å•å…ƒç»“æ„ï¼Œæ¯ä¸ªåŒºçš„å¤§å°ä¸º1Mã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ InnoDBå­˜å‚¨å¼•æ“é¡µå¤§å°ä¸º16Kï¼Œ å³ä¸€ä¸ªåŒºä¸­ä¸€å…±æœ‰64ä¸ªè¿ç»­çš„é¡µã€‚</li><li>é¡µï¼Œæ˜¯InnoDB å­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•å…ƒï¼Œæ¯ä¸ªé¡µçš„å¤§å°é»˜è®¤ä¸º 16KBã€‚ä¸ºäº†ä¿è¯é¡µçš„è¿ç»­æ€§ï¼ŒInnoDB å­˜å‚¨å¼•æ“æ¯æ¬¡ä»ç£ç›˜ç”³è¯· 4-5 ä¸ªåŒºã€‚</li><li>è¡Œï¼ŒInnoDB å­˜å‚¨å¼•æ“æ•°æ®æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ã€‚åœ¨è¡Œä¸­ï¼Œé»˜è®¤æœ‰ä¸¤ä¸ªéšè—å­—æ®µï¼š <ul><li>Trx_idï¼šæ¯æ¬¡å¯¹æŸæ¡è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠå¯¹åº”çš„äº‹åŠ¡idèµ‹å€¼ç»™trx_idéšè—åˆ—ã€‚</li><li>Roll_pointerï¼šæ¯æ¬¡å¯¹æŸæ¡å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠæ—§çš„ç‰ˆæœ¬å†™å…¥åˆ°undoæ—¥å¿—ä¸­ï¼Œç„¶åè¿™ä¸ªéšè—åˆ—å°±ç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥æ‰¾åˆ°è¯¥è®°å½•ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚</li></ul></li></ul><h3 id="_2ã€innodbè®°å½•æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_2ã€innodbè®°å½•æ ¼å¼"><span>2ã€InnoDBè®°å½•æ ¼å¼</span></a></h3><p>InnoDBè®¾è®¡äº†å››ç§è¡Œæ ¼å¼ï¼š<code>Compact, Redundant, Dynamic, Compressed</code>ï¼Œå¯ä»¥åœ¨åˆ›å»ºæˆ–ä¿®æ”¹çš„è¡¨è¯­å¥ä¸­æŒ‡å®š<code>ROW_FORMAT</code>ï¼Œé»˜è®¤Dynamicè¡Œæ ¼å¼ã€‚</p><h4 id="_1-compactè¡Œæ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_1-compactè¡Œæ ¼å¼"><span>1)Compactè¡Œæ ¼å¼</span></a></h4><!----><p>ä¸€æ¡å®Œæ•´çš„è®°å½•åˆ†ä¸º<code>è®°å½•çš„é¢å¤–ä¿¡æ¯</code>å’Œ<code>è®°å½•çš„çœŸå®æ•°æ®</code>ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p><ul><li>è®°å½•çš„é¢å¤–ä¿¡æ¯ <ul><li><strong>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</strong>ï¼šéNULLçš„å˜é•¿å­—æ®µ/å¯å˜å­—ç¬¦é›†å­—æ®µçš„å®é™…é•¿åº¦ï¼ŒæŒ‰åˆ—é€†åºå­˜æ”¾ï¼Œæ¯åˆ—å 1~2ä¸ªå­—èŠ‚</li><li><strong>NULLå€¼åˆ—è¡¨</strong>ï¼šå…è®¸NULLçš„åˆ—çš„æ ‡å¿—ä½ï¼Œ1ä¸ºNULLï¼Œ0éNULLï¼ŒæŒ‰åˆ—é€†åºï¼Œé«˜ä½ç”¨0è¡¥é½è‡³æ•´å­—èŠ‚ã€‚</li><li><strong>è®°å½•å¤´ä¿¡æ¯</strong>ï¼šå›ºå®šçš„5ä¸ªå­—èŠ‚ç»„æˆ</li></ul></li></ul><!----><ul><li>è®°å½•çš„çœŸå®æ•°æ®ï¼šçœŸå®åˆ—æ•°æ®ï¼Œä»¥åŠä¸‰ä¸ªéšè—å­—æ®µ <ul><li><strong>row_id</strong>: å¯é€‰ï¼Œæ²¡æœ‰ä¸»é”®/Uniqueå­—æ®µçš„è®°å½•ï¼Œå¼•æ“é»˜è®¤ç”Ÿæˆè¯¥éšè—åˆ—ä½œä¸ºä¸»é”®</li><li><strong>transaction_id</strong>: æœ€åä¸€æ¬¡æ’å…¥æˆ–æ›´æ–°è¯¥è¡Œçš„äº‹åŠ¡ id</li><li><strong>roll_pointer</strong>: å›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥è¡Œçš„ undo log</li></ul></li></ul><h4 id="_2-redundantè¡Œæ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_2-redundantè¡Œæ ¼å¼"><span>2)Redundantè¡Œæ ¼å¼</span></a></h4><p>MySQL 5.0 ä¹‹å‰ä½¿ç”¨çš„è¡Œæ ¼å¼</p><!----><h4 id="_3-è¡Œæº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3-è¡Œæº¢å‡º"><span>3)è¡Œæº¢å‡º</span></a></h4><ul><li>å¯¹äºå®šé•¿å­—æ®µï¼Œæ— è®ºçœŸå®æ•°æ®å¤§å°ï¼Œéƒ½ä¼šå ç”¨å›ºå®šå¤§å°çš„ç©ºé—´ï¼Œç”¨0/ç©ºæ ¼è¡¥é½</li><li>VARCHARç±»å‹æœ€å¤šå ç”¨65535å­—èŠ‚ï¼Œä½†è¿˜ä¾èµ–äºå­—ç¬¦é›†ã€åˆ—çš„é™åˆ¶ç­‰</li><li>å¯¹äºCompactå’ŒRedundantï¼Œå¦‚æœæŸä¸€åˆ—æ•°æ®è¿‡å¤§ï¼Œåªä¼šå­˜å‚¨è¯¥åˆ—å‰768ä¸ªå­—èŠ‚ï¼Œç„¶åç”¨20ä¸ªå­—èŠ‚æŒ‡å‘å­˜å‚¨æº¢å‡ºæ•°æ®çš„å¦ä¸€ä¸ªé¡µ</li><li>MySQLè§„å®šä¸€ä¸ªé¡µä¸­è‡³å°‘å­˜æ”¾ä¸¤è¡Œè®°å½•ï¼Œä»¥åŠåˆ—çš„æ•°é‡ï¼Œéƒ½ä¼šå½±å“è¡Œæº¢å‡ºçš„ä¸´ç•Œç‚¹</li></ul><h4 id="_4-dynamic-å’Œ-compressed-è¡Œæ ¼å¼" tabindex="-1"><a class="header-anchor" href="#_4-dynamic-å’Œ-compressed-è¡Œæ ¼å¼"><span>4)Dynamic å’Œ Compressed è¡Œæ ¼å¼</span></a></h4><p>MySQL 8.0 é»˜è®¤è¡Œæ ¼å¼å°±æ˜¯<code>Dynamic</code>ï¼Œä¸Compactç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè¡Œæº¢å‡ºæ—¶ï¼ŒçœŸå®æ•°æ®å¤„ä»…æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆå­˜å‚¨æ‰€æœ‰æ•°æ®å­—èŠ‚çš„å…¶å®ƒé¡µã€‚è€Œ<code>Compressed</code>ä¼šé‡‡ç”¨å‹ç¼©ç®—æ³•å¯¹é¡µé¢è¿›è¡Œå‹ç¼©ï¼Œä»¥èŠ‚çœç©ºé—´</p><h3 id="_3ã€innodbæ•°æ®é¡µ" tabindex="-1"><a class="header-anchor" href="#_3ã€innodbæ•°æ®é¡µ"><span>3ã€InnoDBæ•°æ®é¡µ</span></a></h3><p>InnoDBè®¾è®¡äº†å¤šç§ç±»å‹çš„é¡µï¼Œå­˜æ”¾ä¸åŒçš„ä¿¡æ¯ï¼Œå…¶ä¸­å­˜æ”¾è¡¨ä¸­è®°å½•çš„æ˜¯æ•°æ®é¡µï¼Œä¹Ÿç§°ç´¢å¼•é¡µï¼ˆInnoDBä¸­ç´¢å¼•å³æ•°æ®ï¼‰ã€‚</p><!----><table><thead><tr><th>åç§°</th><th>ä¸­æ–‡å</th><th>å ç”¨ç©ºé—´å¤§å°</th><th>æè¿°</th></tr></thead><tbody><tr><td>File Header</td><td>æ–‡ä»¶å¤´éƒ¨</td><td>38å­—èŠ‚</td><td>é¡µçš„ä¸€äº›é€šç”¨ä¿¡æ¯</td></tr><tr><td>Page Header</td><td>é¡µé¢å¤´éƒ¨</td><td>56å­—èŠ‚</td><td>æ•°æ®é¡µä¸“æœ‰çš„ä¸€äº›ä¿¡æ¯</td></tr><tr><td>Infimum + Supremum</td><td>æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•</td><td>26ä¸ç¡®å®š</td><td>ä¸¤ä¸ªè™šæ‹Ÿè¡Œè®°å½•</td></tr><tr><td>User Records</td><td>ç”¨æˆ·è®°å½•</td><td>ä¸ç¡®å®š</td><td>å®é™…å­˜å‚¨çš„è¡Œè®°å½•å†…å®¹</td></tr><tr><td>Free Space</td><td>ç©ºé—²ç©ºé—´</td><td>ä¸ç¡®å®š</td><td>é¡µä¸­å°šæœªä½¿ç”¨çš„ç©ºé—´</td></tr><tr><td>Page Directory</td><td>é¡µé¢ç›®å½•</td><td>ä¸ç¡®å®š</td><td>é¡µä¸­æŸäº›è®°å½•çš„ç›¸å¯¹ä½ç½®</td></tr><tr><td>File Trailer</td><td>æ–‡ä»¶å°¾éƒ¨</td><td>8å­—èŠ‚</td><td>æ ¡éªŒé¡µæ˜¯å¦å®Œæ•´</td></tr></tbody></table><h4 id="_1-user-records" tabindex="-1"><a class="header-anchor" href="#_1-user-records"><span>1)User Records</span></a></h4><p>æ¯æ’å…¥ä¸€æ¡è®°å½•ï¼Œéƒ½ä¼šä»<code>Free Space</code>åˆ†é…ä¸€æ¡è®°å½•çš„ç©ºé—´ç»™<code>User Records</code>ï¼ŒFree Spaceåˆ†é…å®Œæ¯•åˆ™è¯¥é¡µä½¿ç”¨å®Œæ¯•ã€‚<strong>è‹¥å¹²ä¸ªè®°å½•ä»¥åŠä¸¤ä¸ªä¼ªè®°å½•æŒ‰ä¸»é”®å¤§å°ä¸²æˆä¸€ä¸ªå•é“¾è¡¨</strong></p><!----><p>å…¶ä¸­æ¯æ¡è®°å½•çš„è®°å½•å¤´éƒ¨åˆ†ï¼š</p><ul><li>delete_mask: <ul><li>æ ‡è®°å½“å‰è®°å½•æ˜¯å¦è¢«åˆ é™¤</li><li>åˆ é™¤åä»…ä¿®æ”¹æ ‡å¿—ä½å’Œé“¾è¡¨æŒ‡é’ˆï¼Œè®°å½•ç©ºé—´æˆä¸ºå¯é‡ç”¨ç©ºé—´</li><li>æ’å…¥æ–°çºªå½•æ—¶ä¼šå¤ç”¨å¯é‡ç”¨ç©ºé—´</li></ul></li><li><strong>min_rec_mask</strong>: B+æ ‘æ¯å±‚éå¶å­ç»“ç‚¹çš„æœ€å°è®°å½•</li><li><strong>n_owned</strong>: è¯¥è®°å½•ç»„æ‰€å«çš„è®°å½•æ•°ï¼Œè§é¡µç›®å½•éƒ¨åˆ†</li><li>heap_no: <ul><li>å½“å‰è®°å½•åœ¨æœ¬é¡µä¸­çš„ä½ç½®</li><li>å…¶ä¸­0ã€1å¯¹åº”æœ€å°(<code>Infimum</code>)å’Œæœ€å¤§(<code>Supremum</code>)çš„ä¼ªè®°å½•</li><li>å®Œæ•´è®°å½•ä¹‹é—´æ ¹æ®ä¸»é”®å¤§å°æ’åºã€‚</li></ul></li><li>record_type: å½“å‰è®°å½•ç±»å‹ <ul><li>0 æ™®é€šè®°å½•</li><li>1 ä¸ºB+æ ‘éå¶èŠ‚ç‚¹è®°å½•</li><li>2 æœ€å°è®°å½•(å³<code>Infimum</code>ä¼ªè®°å½•)</li><li>3 æœ€å¤§è®°å½•(å³<code>Supremum</code>ä¼ªè®°å½•)ã€‚</li></ul></li><li><strong>next_record</strong>: å½“å‰è®°å½•çœŸå®æ•°æ®åˆ°ä¸‹ä¸€æ¡è®°å½•çœŸå®æ•°æ®çš„åœ°å€åç§»é‡ (æŒ‰åˆ—é€†åºæ”¾ç½®æ­£æ˜¯ä¸ºäº†æé«˜ç¼“å†²å‘½ä¸­ç‡)</li></ul><h4 id="_2-page-directory" tabindex="-1"><a class="header-anchor" href="#_2-page-directory"><span>2)Page Directory</span></a></h4><p>å¯¹æ•´ä¸ªå•é“¾è¡¨æŸ¥æ‰¾è®°å½•æ€§èƒ½ä½ï¼Œå› æ­¤é‡‡å–åˆ†ç»„ç´¢å¼•ç­–ç•¥ï¼š</p><ul><li>æ‰€æœ‰æ­£å¸¸è®°å½• (åŒ…æ‹¬æœ€å°ã€æœ€å¤§è®°å½•ï¼Œæ’é™¤å·²åˆ é™¤è®°å½•) åˆ’åˆ†ä¸ºè‹¥å¹²ç»„</li><li>æ¯ç»„æœ€åä¸€æ¡è®°å½•ï¼ˆå³æœ€å¤§è®°å½•ï¼‰çš„å¤´è®°å½•ä¸­çš„<code>n_owned</code>æ ‡è®°è¯¥ç»„å†…è®°å½•æ•°</li><li>æ¯ç»„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡æŠ½å–æˆç´¢å¼•ï¼Œå­˜æ”¾åœ¨<code>Page Directory</code>ä¸­æ„æˆé¡µç›®å½•ï¼Œå…¶ä¸­æ¯ä¸ªåç§»é‡ç§°ä¸ºæ§½</li></ul><p>æ§½çš„æ›´æ–°ï¼š</p><ul><li>åˆå§‹æ—¶ä»…<code>Infimum</code>å’Œ<code>Supremum</code>ä¸¤ä¸ªç»„</li><li>æ¯æ’å…¥ä¸€æ¡è®°å½•ï¼Œä»é¡µç›®å½•ä¸­æ‰¾åˆ°ä¸»é”®å€¼å¤§äºæœ¬è®°å½•çš„æœ€å°æ§½ï¼Œç„¶åæŠŠè¯¥æ§½çš„<code>n_owned</code>åŠ ä¸€ï¼Œç›´åˆ°è¯¥ç»„å†…è®°å½•è¾¾åˆ°8æ¡</li><li>ä¸€ä¸ªç»„å†…çš„è®°å½•è¾¾åˆ°8æ¡åï¼Œå†æ¬¡æ’å…¥æ–°è®°å½•æ—¶ï¼Œå°†è¯¥ç»„æ‹†åˆ†ä¸ºä¸€ä¸ª4æ¡è®°å½•çš„ç»„å’Œä¸€ä¸ª5æ¡è®°å½•çš„ç»„ï¼Œå¹¶æ–°å¢å¯¹åº”çš„æ§½</li></ul><!----><p>å› æ­¤ï¼ŒæŸ¥æ‰¾æ—¶:</p><ul><li>é€šè¿‡äºŒåˆ†æ³•ç¡®å®šè¯¥è®°å½•æ‰€åœ¨çš„æ§½ï¼Œå¹¶å€ŸåŠ©å‰ä¸€ä¸ªæ§½æ‰¾åˆ°æ‰€åœ¨æ§½ä¸­ä¸»é”®å€¼æœ€å°çš„è®°å½•</li><li>é€šè¿‡è®°å½•çš„<code>next_record</code>éå†è¯¥æ§½æŸ¥æ‰¾è®°å½•</li></ul><h4 id="_3-å…¶å®ƒéƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#_3-å…¶å®ƒéƒ¨åˆ†"><span>3)å…¶å®ƒéƒ¨åˆ†</span></a></h4><ul><li><strong>Page Header</strong>: é’ˆå¯¹æ•°æ®é¡µï¼Œå­˜å‚¨æœ¬é¡µè®°å½•çš„çŠ¶æ€ä¿¡æ¯ï¼Œå 56å­—èŠ‚</li><li><strong>File Header</strong>: é’ˆå¯¹æ‰€æœ‰é¡µï¼Œå­˜å‚¨é¡µçš„é€šç”¨ä¿¡æ¯ï¼Œå¦‚å‰åé¡µæŒ‡é’ˆæ„æˆåŒé“¾è¡¨ï¼Œå 38å­—èŠ‚</li><li><strong>File Trailer</strong>: é’ˆå¯¹æ‰€æœ‰é¡µï¼Œç”¨äºåŒæ­¥æ­£ç¡®æ€§æ£€éªŒï¼Œå 8å­—èŠ‚ï¼Œå‰4å­—èŠ‚æ ¡éªŒå’Œï¼Œåå››å­—èŠ‚æ—¥å¿—åºåˆ—ä½ç½®LSN</li></ul><!----><h3 id="_4ã€æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_4ã€æ¶æ„"><span>4ã€æ¶æ„</span></a></h3><p>MySQL5.5 ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“ï¼Œå®ƒæ“…é•¿äº‹åŠ¡å¤„ç†ï¼Œå…·æœ‰å´©æºƒæ¢å¤ç‰¹æ€§ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨éå¸¸å¹¿æ³›ã€‚ä¸‹é¢æ˜¯InnoDBæ¶æ„å›¾ï¼Œå·¦ä¾§ä¸ºå†…å­˜ç»“æ„ï¼Œå³ä¾§ä¸ºç£ç›˜ç»“æ„ã€‚</p><!----><h4 id="_1-å†…å­˜ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å†…å­˜ç»“æ„"><span>1)å†…å­˜ç»“æ„</span></a></h4><p>åœ¨å·¦ä¾§çš„å†…å­˜ç»“æ„ä¸­ï¼Œä¸»è¦åˆ†ä¸ºè¿™ä¹ˆå››å¤§å—å„¿ï¼š <code>Buffer Pool</code>ã€<code>Change Buffer</code>ã€<code>Adaptive Hash Index</code>ã€<code>Log Buffer</code>ã€‚ æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹è¿™å››ä¸ªéƒ¨åˆ†ã€‚</p><ul><li><strong>Buffer Pool</strong></li></ul><p>InnoDBå­˜å‚¨å¼•æ“åŸºäºç£ç›˜æ–‡ä»¶å­˜å‚¨ï¼Œè®¿é—®ç‰©ç†ç¡¬ç›˜å’Œåœ¨å†…å­˜ä¸­è¿›è¡Œè®¿é—®ï¼Œé€Ÿåº¦ç›¸å·®å¾ˆå¤§ï¼Œä¸ºäº†å°½å¯èƒ½å¼¥è¡¥è¿™ä¸¤è€…ä¹‹é—´çš„I/Oæ•ˆç‡çš„å·®å€¼ï¼Œå°±éœ€è¦æŠŠç»å¸¸ä½¿ç”¨çš„æ•°æ®åŠ è½½åˆ°ç¼“å†²æ± ä¸­ï¼Œé¿å…æ¯æ¬¡è®¿é—®éƒ½è¿›è¡Œç£ç›˜I/Oã€‚</p><p>åœ¨InnoDBçš„ç¼“å†²æ± ä¸­ä¸ä»…ç¼“å­˜äº†ç´¢å¼•é¡µå’Œæ•°æ®é¡µï¼Œè¿˜åŒ…å«äº†undoé¡µã€æ’å…¥ç¼“å­˜ã€è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ä»¥åŠInnoDBçš„é”ä¿¡æ¯ç­‰ç­‰ã€‚</p><p>ç¼“å†²æ±  Buffer Poolï¼Œæ˜¯ä¸»å†…å­˜ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼Œé‡Œé¢å¯ä»¥ç¼“å­˜ç£ç›˜ä¸Šç»å¸¸æ“ä½œçš„çœŸå®æ•°æ®ï¼Œåœ¨æ‰§è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œæ—¶ï¼Œå…ˆæ“ä½œç¼“å†²æ± ä¸­çš„æ•°æ®ï¼ˆè‹¥ç¼“å†²æ± æ²¡æœ‰æ•°æ®ï¼Œåˆ™ä»ç£ç›˜åŠ è½½å¹¶ç¼“å­˜ï¼‰ï¼Œç„¶åå†ä»¥ä¸€å®šé¢‘ç‡åˆ·æ–°åˆ°ç£ç›˜ï¼Œä»è€Œå‡å°‘ç£ç›˜IOï¼ŒåŠ å¿«å¤„ç†é€Ÿåº¦ã€‚</p><p>ç¼“å†²æ± ä»¥Pageé¡µä¸ºå•ä½ï¼Œåº•å±‚é‡‡ç”¨é“¾è¡¨æ•°æ®ç»“æ„ç®¡ç†Pageã€‚æ ¹æ®çŠ¶æ€ï¼Œå°†Pageåˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><ul><li><p>free pageï¼šç©ºé—²pageï¼Œæœªè¢«ä½¿ç”¨ã€‚</p></li><li><p>clean pageï¼šè¢«ä½¿ç”¨pageï¼Œæ•°æ®æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚</p></li><li><p>dirty pageï¼šè„é¡µï¼Œè¢«ä½¿ç”¨pageï¼Œæ•°æ®è¢«ä¿®æ”¹è¿‡ï¼Œä¹Ÿä¸­æ•°æ®ä¸ç£ç›˜çš„æ•°æ®äº§ç”Ÿäº†ä¸ä¸€è‡´ã€‚</p></li></ul><p>åœ¨ä¸“ç”¨æœåŠ¡å™¨ä¸Šï¼Œé€šå¸¸å°†å¤šè¾¾80ï¼…çš„ç‰©ç†å†…å­˜åˆ†é…ç»™ç¼“å†²æ±  ã€‚å‚æ•°è®¾ç½®ï¼š <code>show variables like &#39;innodb_buffer_pool_size&#39;;</code></p><ul><li><strong>Change Buffer</strong></li></ul><p>Change Bufferï¼Œæ›´æ”¹ç¼“å†²åŒºï¼ˆé’ˆå¯¹äºéå”¯ä¸€äºŒçº§ç´¢å¼•é¡µï¼‰ï¼Œåœ¨æ‰§è¡ŒDMLè¯­å¥æ—¶ï¼Œå¦‚æœè¿™äº›æ•°æ®Pageæ²¡æœ‰åœ¨Buffer Poolä¸­ï¼Œä¸ä¼šç›´æ¥æ“ä½œç£ç›˜ï¼Œè€Œä¼šå°†æ•°æ®å˜æ›´å­˜åœ¨æ›´æ”¹ç¼“å†²åŒº Change Bufferä¸­ï¼Œåœ¨æœªæ¥æ•°æ®è¢«è¯»å–æ—¶ï¼Œå†å°†æ•°æ®åˆå¹¶æ¢å¤åˆ°Buffer Poolä¸­ï¼Œå†å°†åˆå¹¶åçš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚</p><div class="hint-container info"><p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p><p>ä¸èšé›†ç´¢å¼•ä¸åŒï¼ŒäºŒçº§ç´¢å¼•é€šå¸¸æ˜¯éå”¯ä¸€çš„ï¼Œå¹¶ä¸”ä»¥ç›¸å¯¹éšæœºçš„é¡ºåºæ’å…¥äºŒçº§ç´¢å¼•ã€‚åŒæ ·ï¼Œåˆ é™¤å’Œæ›´æ–°å¯èƒ½ä¼šå½±å“ç´¢å¼•æ ‘ä¸­ä¸ç›¸é‚»çš„äºŒçº§ç´¢å¼•é¡µï¼Œå¦‚æœæ¯ä¸€æ¬¡éƒ½æ“ä½œç£ç›˜ï¼Œä¼šé€ æˆå¤§é‡çš„ç£ç›˜IOã€‚æœ‰äº†ChangeBufferä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼“å†²æ± ä¸­è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œå‡å°‘ç£ç›˜IOã€‚</p></div><ul><li><strong>Adaptive Hash Index</strong></li></ul><p>è‡ªé€‚åº”hashç´¢å¼•ï¼Œç”¨äºä¼˜åŒ–å¯¹Buffer Poolæ•°æ®çš„æŸ¥è¯¢ã€‚MySQLçš„innoDBå¼•æ“ä¸­è™½ç„¶æ²¡æœ‰ç›´æ¥æ”¯æŒhashç´¢å¼•ï¼Œä½†æ˜¯ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯è¿™ä¸ªè‡ªé€‚åº”hashç´¢å¼•ã€‚å› ä¸ºå‰é¢æˆ‘ä»¬è®²åˆ°è¿‡ï¼Œhashç´¢å¼•åœ¨è¿›è¡Œç­‰å€¼åŒ¹é…æ—¶ï¼Œä¸€èˆ¬æ€§èƒ½æ˜¯è¦é«˜äºB+æ ‘çš„ï¼Œå› ä¸ºhashç´¢å¼•ä¸€èˆ¬åªéœ€è¦ä¸€æ¬¡IOå³å¯ï¼Œè€ŒB+æ ‘ï¼Œå¯èƒ½éœ€è¦å‡ æ¬¡åŒ¹é…ï¼Œæ‰€ä»¥hashç´¢å¼•çš„æ•ˆç‡è¦é«˜ï¼Œä½†æ˜¯hashç´¢å¼•åˆä¸é€‚åˆåšèŒƒå›´æŸ¥è¯¢ã€æ¨¡ç³ŠåŒ¹é…ç­‰ã€‚</p><p>InnoDBå­˜å‚¨å¼•æ“ä¼šç›‘æ§å¯¹è¡¨ä¸Šå„ç´¢å¼•é¡µçš„æŸ¥è¯¢ï¼Œå¦‚æœè§‚å¯Ÿåˆ°åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹hashç´¢å¼•å¯ä»¥æå‡é€Ÿåº¦ï¼Œåˆ™å»ºç«‹hashç´¢å¼•ï¼Œç§°ä¹‹ä¸ºè‡ªé€‚åº”hashç´¢å¼•ã€‚</p><p><strong>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼Œæ˜¯ç³»ç»Ÿæ ¹æ®æƒ…å†µè‡ªåŠ¨å®Œæˆ</strong>ã€‚å‚æ•°ï¼š<code> adaptive_hash_index</code></p><ul><li><strong>Log Buffer</strong></li></ul><p>Log Bufferï¼šæ—¥å¿—ç¼“å†²åŒºï¼Œç”¨æ¥ä¿å­˜è¦å†™å…¥åˆ°ç£ç›˜ä¸­çš„logæ—¥å¿—æ•°æ®ï¼ˆredo log ã€undo logï¼‰ï¼Œé»˜è®¤å¤§å°ä¸º 16MBï¼Œæ—¥å¿—ç¼“å†²åŒºçš„æ—¥å¿—ä¼šå®šæœŸåˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚å¦‚æœéœ€è¦æ›´æ–°ã€æ’å…¥æˆ–åˆ é™¤è®¸å¤šè¡Œçš„äº‹åŠ¡ï¼Œå¢åŠ æ—¥å¿—ç¼“å†²åŒºçš„å¤§å°å¯ä»¥èŠ‚çœç£ç›˜ I/Oã€‚</p><p>å‚æ•°:</p><ul><li><p><code>innodb_log_buffer_size</code>ï¼šç¼“å†²åŒºå¤§å°</p></li><li><p><code>innodb_flush_log_at_trx_commit</code>ï¼šæ—¥å¿—åˆ·æ–°åˆ°ç£ç›˜æ—¶æœºï¼Œå–å€¼ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªï¼š</p><ul><li>1: æ—¥å¿—åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶å†™å…¥å¹¶åˆ·æ–°åˆ°ç£ç›˜ï¼Œé»˜è®¤å€¼ã€‚</li><li>0: æ¯ç§’å°†æ—¥å¿—å†™å…¥å¹¶åˆ·æ–°åˆ°ç£ç›˜ä¸€æ¬¡ã€‚</li><li>2: æ—¥å¿—åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤åå†™å…¥ï¼Œå¹¶æ¯ç§’åˆ·æ–°åˆ°ç£ç›˜ä¸€æ¬¡ã€‚</li></ul></li></ul><h4 id="_2-ç£ç›˜ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_2-ç£ç›˜ç»“æ„"><span>2)ç£ç›˜ç»“æ„</span></a></h4><p>æ¥ä¸‹æ¥ï¼Œå†æ¥çœ‹çœ‹InnoDBä½“ç³»ç»“æ„çš„å³è¾¹éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ç£ç›˜ç»“æ„.</p><ul><li><strong>System Tablespace</strong></li></ul><p>ç³»ç»Ÿè¡¨ç©ºé—´æ˜¯æ›´æ”¹ç¼“å†²åŒºçš„å­˜å‚¨åŒºåŸŸã€‚å¦‚æœè¡¨æ˜¯åœ¨ç³»ç»Ÿè¡¨ç©ºé—´è€Œä¸æ˜¯æ¯ä¸ªè¡¨æ–‡ä»¶æˆ–é€šç”¨è¡¨ç©ºé—´ä¸­åˆ›å»ºçš„ï¼Œå®ƒä¹Ÿå¯èƒ½åŒ…å«è¡¨å’Œç´¢å¼•æ•°æ®ã€‚(åœ¨MySQL5.xç‰ˆæœ¬ä¸­è¿˜åŒ…å«InnoDBæ•°æ®å­—å…¸ã€undologç­‰)</p><p>å‚æ•°ï¼š<code>innodb_data_file_path</code></p><p>ç³»ç»Ÿè¡¨ç©ºé—´é»˜è®¤çš„æ–‡ä»¶åå« ibdata1ã€‚</p><ul><li><p><strong>File-Per-Table Tablespaces</strong></p><p>å¦‚æœå¼€å¯äº†innodb_file_per_tableå¼€å…³ ï¼Œåˆ™æ¯ä¸ªè¡¨çš„æ–‡ä»¶è¡¨ç©ºé—´åŒ…å«å•ä¸ªInnoDBè¡¨çš„æ•°æ®å’Œç´¢å¼• ï¼Œå¹¶å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„å•ä¸ªæ•°æ®æ–‡ä»¶ä¸­ã€‚</p></li></ul><p>å¼€å…³å‚æ•°ï¼š<code>innodb_file_per_table</code> ï¼Œè¯¥å‚æ•°é»˜è®¤å¼€å¯ã€‚</p><ul><li><strong>General Tablespaces</strong></li></ul><p>é€šç”¨è¡¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ CREATE TABLESPACE è¯­æ³•åˆ›å»ºé€šç”¨è¡¨ç©ºé—´ï¼Œåœ¨åˆ›å»ºè¡¨æ—¶ï¼Œå¯ä»¥æŒ‡å®šè¯¥è¡¨ç©ºé—´ã€‚</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">--  åˆ›å»ºè¡¨ç©ºé—´</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span> ts_name <span class="token keyword">ADD</span> DATAFILE <span class="token string">&#39;file_name&#39;</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> engine_name<span class="token punctuation">;</span>

<span class="token comment">-- åˆ›å»ºè¡¨æ—¶æŒ‡å®šè¡¨ç©ºé—´</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> xxx <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">TABLESPACE</span> ts_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>Undo Tablespaces</strong></li></ul><p>æ’¤é”€è¡¨ç©ºé—´ï¼ŒMySQLå®ä¾‹åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸¤ä¸ªé»˜è®¤çš„undoè¡¨ç©ºé—´ï¼ˆåˆå§‹å¤§å°16Mï¼‰ï¼Œç”¨äºå­˜å‚¨undo logæ—¥å¿—ã€‚</p><ul><li><strong>Temporary Tablespaces</strong></li></ul><p>InnoDB ä½¿ç”¨ä¼šè¯ä¸´æ—¶è¡¨ç©ºé—´å’Œå…¨å±€ä¸´æ—¶è¡¨ç©ºé—´ã€‚å­˜å‚¨ç”¨æˆ·åˆ›å»ºçš„ä¸´æ—¶è¡¨ç­‰æ•°æ®ã€‚</p><ul><li><strong>Doublewrite Buffer Files</strong></li></ul><p>åŒå†™ç¼“å†²åŒºï¼ŒinnoDBå¼•æ“å°†æ•°æ®é¡µä»Buffer Poolåˆ·æ–°åˆ°ç£ç›˜å‰ï¼Œå…ˆå°†æ•°æ®é¡µå†™å…¥åŒå†™ç¼“å†²åŒºæ–‡ä»¶ä¸­ï¼Œä¾¿äºç³»ç»Ÿå¼‚å¸¸æ—¶æ¢å¤æ•°æ®ã€‚</p><ul><li><strong>Redo Log</strong></li></ul><p>é‡åšæ—¥å¿—ï¼Œæ˜¯ç”¨æ¥å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ã€‚è¯¥æ—¥å¿—æ–‡ä»¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé‡åšæ—¥å¿—ç¼“å†²ï¼ˆredo log bufferï¼‰ä»¥åŠé‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredo logï¼‰,å‰è€…æ˜¯åœ¨å†…å­˜ä¸­ï¼Œåè€…åœ¨ç£ç›˜ä¸­ã€‚å½“äº‹åŠ¡æäº¤ä¹‹åä¼šæŠŠæ‰€æœ‰ä¿®æ”¹ä¿¡æ¯éƒ½ä¼šå­˜åˆ°è¯¥æ—¥å¿—ä¸­, ç”¨äºåœ¨åˆ·æ–°è„é¡µåˆ°ç£ç›˜æ—¶,å‘ç”Ÿé”™è¯¯æ—¶, è¿›è¡Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚</p><p>ä»¥å¾ªç¯æ–¹å¼å†™å…¥é‡åšæ—¥å¿—æ–‡ä»¶ï¼Œæ¶‰åŠä¸¤ä¸ªæ–‡ä»¶:<code>ib_logfile0,ib_logfile1</code></p><h4 id="_3-åå°çº¿ç¨‹" tabindex="-1"><a class="header-anchor" href="#_3-åå°çº¿ç¨‹"><span>3)åå°çº¿ç¨‹</span></a></h4><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†InnoDBçš„å†…å­˜ç»“æ„ï¼Œä»¥åŠç£ç›˜ç»“æ„ï¼Œé‚£ä¹ˆå†…å­˜ä¸­æˆ‘ä»¬æ‰€æ›´æ–°çš„æ•°æ®ï¼Œåˆæ˜¯å¦‚ä½•åˆ°ç£ç›˜ä¸­çš„å‘¢ï¼Ÿ æ­¤æ—¶ï¼Œå°±æ¶‰åŠåˆ°ä¸€ç»„åå°çº¿ç¨‹ï¼Œæ¥ä¸‹æ¥ï¼Œå°±æ¥ä»‹ç»ä¸€äº›InnoDBä¸­æ¶‰åŠåˆ°çš„åå°çº¿ç¨‹ã€‚</p><!----><p>åœ¨InnoDBçš„åå°çº¿ç¨‹ä¸­ï¼Œåˆ†ä¸º4ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>Master Thread</code> ã€<code>IO Thread</code>ã€<code>Purge Thread</code>ã€<code>Page Cleaner Thread</code>ã€‚</p><ul><li><strong>Master Thread</strong></li></ul><p>æ ¸å¿ƒåå°çº¿ç¨‹ï¼Œè´Ÿè´£è°ƒåº¦å…¶ä»–çº¿ç¨‹ï¼Œè¿˜è´Ÿè´£å°†ç¼“å†²æ± ä¸­çš„æ•°æ®å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ä¸­, ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿˜åŒ…æ‹¬è„é¡µçš„åˆ·æ–°ã€åˆå¹¶æ’å…¥ç¼“å­˜ã€undoé¡µçš„å›æ”¶</p><ul><li><strong>IO Thread</strong></li></ul><p>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­å¤§é‡ä½¿ç”¨äº†AIOæ¥å¤„ç†IOè¯·æ±‚, è¿™æ ·å¯ä»¥æå¤§åœ°æé«˜æ•°æ®åº“çš„æ€§èƒ½ï¼Œè€ŒIO Threadä¸»è¦è´Ÿè´£è¿™äº›IOè¯·æ±‚çš„å›è°ƒã€‚</p><table><thead><tr><th>çº¿ç¨‹ç±»å‹</th><th>é»˜è®¤ä¸ªæ•°</th><th>èŒè´£</th></tr></thead><tbody><tr><td>Read thread</td><td>4</td><td>è´Ÿè´£è¯»æ“ä½œ</td></tr><tr><td>Wrie thread</td><td>4</td><td>è´Ÿè´£å†™æ“ä½œ</td></tr><tr><td>Log thread</td><td>1</td><td>è´Ÿè´£å°†æ—¥å¿—ç¼“å†²åŒºåˆ·æ–°åˆ°ç£ç›˜</td></tr><tr><td>Insert buffer thread</td><td>1</td><td>è´Ÿè´£å°†å†™ç¼“å†²åŒºå†…å®¹åˆ·æ–°åˆ°ç£ç›˜</td></tr></tbody></table><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„è¿™æ¡æŒ‡ä»¤ï¼ŒæŸ¥çœ‹åˆ°InnoDBçš„çŠ¶æ€ä¿¡æ¯ï¼Œå…¶ä¸­å°±åŒ…å«IO Threadä¿¡æ¯</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">engine</span> <span class="token keyword">innodb</span> <span class="token keyword">status</span> \G<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>Purge Thread</strong></li></ul><p>ä¸»è¦ç”¨äºå›æ”¶äº‹åŠ¡å·²ç»æäº¤äº†çš„undo logï¼Œåœ¨äº‹åŠ¡æäº¤ä¹‹åï¼Œundo logå¯èƒ½ä¸ç”¨äº†ï¼Œå°±ç”¨å®ƒæ¥å›æ”¶ã€‚</p><ul><li><strong>Page Cleaner Thread</strong></li></ul><p>ååŠ© Master Thread åˆ·æ–°è„é¡µåˆ°ç£ç›˜çš„çº¿ç¨‹ï¼Œå®ƒå¯ä»¥å‡è½» Master Thread çš„å·¥ä½œå‹åŠ›ï¼Œå‡å°‘é˜»å¡ã€‚</p><h2 id="ä¸‰ã€buffer-poolè¯¦è§£" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€buffer-poolè¯¦è§£"><span>ä¸‰ã€Buffer Poolè¯¦è§£</span></a></h2><h3 id="_1ã€ä¸ºä»€ä¹ˆè¦æœ‰-buffer-pool" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¸ºä»€ä¹ˆè¦æœ‰-buffer-pool"><span>1ã€ä¸ºä»€ä¹ˆè¦æœ‰ Buffer Poolï¼Ÿ</span></a></h3><p>è™½ç„¶è¯´ MySQL çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨ç£ç›˜é‡Œçš„ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½æ¯æ¬¡éƒ½ä»ç£ç›˜é‡Œé¢è¯»å–æ•°æ®ï¼Œè¿™æ ·æ€§èƒ½æ˜¯æå·®çš„ã€‚è¦æƒ³æå‡æŸ¥è¯¢æ€§èƒ½ï¼ŒåŠ ä¸ªç¼“å­˜å°±è¡Œäº†å˜›ã€‚æ‰€ä»¥ï¼Œå½“æ•°æ®ä»ç£ç›˜ä¸­å–å‡ºåï¼Œç¼“å­˜å†…å­˜ä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–ã€‚</p><p>ä¸ºæ­¤ï¼ŒInnodb å­˜å‚¨å¼•æ“è®¾è®¡äº†ä¸€ä¸ª<strong>ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰</strong>ï¼Œæ¥æé«˜æ•°æ®åº“çš„è¯»å†™æ€§èƒ½ã€‚</p><!----><p>æœ‰äº†ç¼“å†²æ± åï¼š</p><ul><li>å½“è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®å­˜åœ¨äº Buffer Pool ä¸­ï¼Œå®¢æˆ·ç«¯å°±ä¼šç›´æ¥è¯»å– Buffer Pool ä¸­çš„æ•°æ®ï¼Œå¦åˆ™å†å»ç£ç›˜ä¸­è¯»å–ã€‚</li><li>å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œé¦–å…ˆæ˜¯ä¿®æ”¹ Buffer Pool ä¸­æ•°æ®æ‰€åœ¨çš„é¡µï¼Œç„¶åå°†å…¶é¡µè®¾ç½®ä¸ºè„é¡µï¼Œæœ€åç”±åå°çº¿ç¨‹å°†è„é¡µå†™å…¥åˆ°ç£ç›˜ã€‚</li></ul><div class="hint-container tip"><p class="hint-container-title">ç¼“å†²æ± æœ‰å¤šå¤§?</p><p>Buffer Pool æ˜¯åœ¨ MySQL å¯åŠ¨çš„æ—¶å€™ï¼Œå‘æ“ä½œç³»ç»Ÿç”³è¯·çš„ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé»˜è®¤é…ç½®ä¸‹ Buffer Pool åªæœ‰ <code>128MB</code> ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´ <code>innodb_buffer_pool_size</code> å‚æ•°æ¥è®¾ç½® Buffer Pool çš„å¤§å°ï¼Œä¸€èˆ¬å»ºè®®è®¾ç½®æˆå¯ç”¨ç‰©ç†å†…å­˜çš„ 60%~80%ã€‚</p></div><h3 id="_2ã€buffer-poolç¼“å­˜ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_2ã€buffer-poolç¼“å­˜ä»€ä¹ˆ"><span>2ã€Buffer Poolç¼“å­˜ä»€ä¹ˆ</span></a></h3><p>InnoDB ä¼šæŠŠå­˜å‚¨çš„æ•°æ®åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªã€Œé¡µã€ï¼Œä»¥é¡µä½œä¸ºç£ç›˜å’Œå†…å­˜äº¤äº’çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªé¡µçš„é»˜è®¤å¤§å°ä¸º 16KBã€‚å› æ­¤ï¼ŒBuffer Pool åŒæ ·éœ€è¦æŒ‰ã€Œé¡µã€æ¥åˆ’åˆ†ã€‚</p><p>åœ¨ MySQL å¯åŠ¨çš„æ—¶å€™ï¼Œ<strong>InnoDB ä¼šä¸º Buffer Pool ç”³è¯·ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç„¶åæŒ‰ç…§é»˜è®¤çš„<code>16KB</code>çš„å¤§å°åˆ’åˆ†å‡ºä¸€ä¸ªä¸ªçš„é¡µï¼ŒBuffer Pool ä¸­çš„é¡µå°±å«åšç¼“å­˜é¡µ</strong>ã€‚æ­¤æ—¶è¿™äº›ç¼“å­˜é¡µéƒ½æ˜¯ç©ºé—²çš„ï¼Œä¹‹åéšç€ç¨‹åºçš„è¿è¡Œï¼Œæ‰ä¼šæœ‰ç£ç›˜ä¸Šçš„é¡µè¢«ç¼“å­˜åˆ° Buffer Pool ä¸­ã€‚</p><p>æ‰€ä»¥ï¼ŒMySQL åˆšå¯åŠ¨çš„æ—¶å€™ï¼Œä½ ä¼šè§‚å¯Ÿåˆ°ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜ç©ºé—´å¾ˆå¤§ï¼Œè€Œä½¿ç”¨åˆ°çš„ç‰©ç†å†…å­˜ç©ºé—´å´å¾ˆå°ï¼Œè¿™æ˜¯å› ä¸ºåªæœ‰è¿™äº›è™šæ‹Ÿå†…å­˜è¢«è®¿é—®åï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šè§¦å‘ç¼ºé¡µä¸­æ–­ï¼Œæ¥ç€å°†è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€å»ºç«‹æ˜ å°„å…³ç³»ã€‚</p><p>Buffer Pool é™¤äº†ç¼“å­˜ã€Œç´¢å¼•é¡µã€å’Œã€Œæ•°æ®é¡µã€ï¼Œè¿˜åŒ…æ‹¬äº† undo é¡µï¼Œæ’å…¥ç¼“å­˜ã€è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ã€é”ä¿¡æ¯ç­‰ç­‰ã€‚</p><p>ä¸ºäº†æ›´å¥½çš„ç®¡ç†è¿™äº›åœ¨ Buffer Pool ä¸­çš„ç¼“å­˜é¡µï¼ŒInnoDB ä¸ºæ¯ä¸€ä¸ªç¼“å­˜é¡µéƒ½åˆ›å»ºäº†ä¸€ä¸ª<strong>æ§åˆ¶å—</strong>ï¼Œæ§åˆ¶å—ä¿¡æ¯åŒ…æ‹¬ã€Œç¼“å­˜é¡µçš„è¡¨ç©ºé—´ã€é¡µå·ã€ç¼“å­˜é¡µåœ°å€ã€é“¾è¡¨èŠ‚ç‚¹ã€ç­‰ç­‰ã€‚</p><p>æ§åˆ¶å—ä¹Ÿæ˜¯å æœ‰å†…å­˜ç©ºé—´çš„ï¼Œå®ƒæ˜¯æ”¾åœ¨ Buffer Pool çš„æœ€å‰é¢ï¼Œæ¥ç€æ‰æ˜¯ç¼“å­˜é¡µï¼Œå¦‚ä¸‹å›¾ï¼š</p><!----><p>ä¸Šå›¾ä¸­æ§åˆ¶å—å’Œç¼“å­˜é¡µä¹‹é—´ç°è‰²éƒ¨åˆ†ç§°ä¸ºç¢ç‰‡ç©ºé—´ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆä¼šæœ‰ç¢ç‰‡ç©ºé—´å‘¢ï¼Ÿ</p><p>æ¯ä¸€ä¸ªæ§åˆ¶å—éƒ½å¯¹åº”ä¸€ä¸ªç¼“å­˜é¡µï¼Œé‚£åœ¨åˆ†é…è¶³å¤Ÿå¤šçš„æ§åˆ¶å—å’Œç¼“å­˜é¡µåï¼Œå¯èƒ½å‰©ä½™çš„é‚£ç‚¹å„¿ç©ºé—´ä¸å¤Ÿä¸€å¯¹æ§åˆ¶å—å’Œç¼“å­˜é¡µçš„å¤§å°ï¼Œè‡ªç„¶å°±ç”¨ä¸åˆ°å–½ï¼Œè¿™ä¸ªç”¨ä¸åˆ°çš„é‚£ç‚¹å„¿å†…å­˜ç©ºé—´å°±è¢«ç§°ä¸ºç¢ç‰‡äº†ã€‚</p><p>å½“ç„¶ï¼Œ<strong>å¦‚æœä½ æŠŠ Buffer Pool çš„å¤§å°è®¾ç½®çš„åˆšåˆšå¥½çš„è¯ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šäº§ç”Ÿç¢ç‰‡ã€‚</strong></p></blockquote><blockquote><p>æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œå°±åªéœ€è¦ç¼“å†²ä¸€æ¡è®°å½•å—ï¼Ÿ</p><p>ä¸æ˜¯çš„ã€‚å½“æˆ‘ä»¬æŸ¥è¯¢ä¸€æ¡è®°å½•æ—¶ï¼ŒInnoDB æ˜¯ä¼šæŠŠæ•´ä¸ªé¡µçš„æ•°æ®åŠ è½½åˆ° Buffer Pool ä¸­ï¼Œå› ä¸ºï¼Œé€šè¿‡ç´¢å¼•åªèƒ½å®šä½åˆ°ç£ç›˜ä¸­çš„é¡µï¼Œè€Œä¸èƒ½å®šä½åˆ°é¡µä¸­çš„ä¸€æ¡è®°å½•ã€‚å°†é¡µåŠ è½½åˆ° Buffer Pool åï¼Œå†é€šè¿‡é¡µé‡Œçš„é¡µç›®å½•å»å®šä½åˆ°æŸæ¡å…·ä½“çš„è®°å½•ã€‚</p></blockquote><h3 id="_3ã€å¦‚ä½•ç®¡ç†-buffer-pool" tabindex="-1"><a class="header-anchor" href="#_3ã€å¦‚ä½•ç®¡ç†-buffer-pool"><span>3ã€å¦‚ä½•ç®¡ç† Buffer Poolï¼Ÿ</span></a></h3><h4 id="_1-å¦‚ä½•ç®¡ç†ç©ºé—²é¡µ" tabindex="-1"><a class="header-anchor" href="#_1-å¦‚ä½•ç®¡ç†ç©ºé—²é¡µ"><span>1)å¦‚ä½•ç®¡ç†ç©ºé—²é¡µï¼Ÿ</span></a></h4><p>Buffer Pool æ˜¯ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå½“ MySQL è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œè¿™ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­çš„ç¼“å­˜é¡µæ—¢æœ‰ç©ºé—²çš„ï¼Œä¹Ÿæœ‰è¢«ä½¿ç”¨çš„ã€‚</p><p>é‚£å½“æˆ‘ä»¬ä»ç£ç›˜è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œæ€»ä¸èƒ½é€šè¿‡éå†è¿™ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´æ¥æ‰¾åˆ°ç©ºé—²çš„ç¼“å­˜é¡µå§ï¼Œè¿™æ ·æ•ˆç‡å¤ªä½äº†ã€‚</p><p>æ‰€ä»¥ï¼Œä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°ç©ºé—²çš„ç¼“å­˜é¡µï¼Œå¯ä»¥ä½¿ç”¨é“¾è¡¨ç»“æ„ï¼Œå°†ç©ºé—²ç¼“å­˜é¡µçš„ã€Œæ§åˆ¶å—ã€ä½œä¸ºé“¾è¡¨çš„èŠ‚ç‚¹ï¼Œè¿™ä¸ªé“¾è¡¨ç§°ä¸º <strong>Free é“¾è¡¨</strong>ï¼ˆç©ºé—²é“¾è¡¨ï¼‰ã€‚</p><!----><ul><li><p>Free é“¾è¡¨ä¸Šé™¤äº†æœ‰æ§åˆ¶å—ï¼Œè¿˜æœ‰ä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œè¯¥å¤´èŠ‚ç‚¹åŒ…å«é“¾è¡¨çš„å¤´èŠ‚ç‚¹åœ°å€ï¼Œå°¾èŠ‚ç‚¹åœ°å€ï¼Œä»¥åŠå½“å‰é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡ç­‰ä¿¡æ¯ã€‚</p></li><li><p>Free é“¾è¡¨èŠ‚ç‚¹æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æ§åˆ¶å—ï¼Œè€Œæ¯ä¸ªæ§åˆ¶å—åŒ…å«ç€å¯¹åº”ç¼“å­˜é¡µçš„åœ°å€ï¼Œæ‰€ä»¥ç›¸å½“äº Free é“¾è¡¨èŠ‚ç‚¹éƒ½å¯¹åº”ä¸€ä¸ªç©ºé—²çš„ç¼“å­˜é¡µã€‚</p></li><li><p>æœ‰äº† Free é“¾è¡¨åï¼Œæ¯å½“éœ€è¦ä»ç£ç›˜ä¸­åŠ è½½ä¸€ä¸ªé¡µåˆ° Buffer Pool ä¸­æ—¶ï¼Œå°±ä» Free é“¾è¡¨ä¸­å–ä¸€ä¸ªç©ºé—²çš„ç¼“å­˜é¡µï¼Œå¹¶ä¸”æŠŠè¯¥ç¼“å­˜é¡µå¯¹åº”çš„æ§åˆ¶å—çš„ä¿¡æ¯å¡«ä¸Šï¼Œç„¶åæŠŠè¯¥ç¼“å­˜é¡µå¯¹åº”çš„æ§åˆ¶å—ä» Free é“¾è¡¨ä¸­ç§»é™¤ã€‚</p></li></ul><h4 id="_2-å¦‚ä½•ç®¡ç†è„é¡µ" tabindex="-1"><a class="header-anchor" href="#_2-å¦‚ä½•ç®¡ç†è„é¡µ"><span>2)å¦‚ä½•ç®¡ç†è„é¡µï¼Ÿ</span></a></h4><p>è®¾è®¡ Buffer Pool é™¤äº†èƒ½æé«˜è¯»æ€§èƒ½ï¼Œè¿˜èƒ½æé«˜å†™æ€§èƒ½ï¼Œä¹Ÿå°±æ˜¯æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½è¦å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯å°† Buffer Pool å¯¹åº”çš„ç¼“å­˜é¡µæ ‡è®°ä¸º<strong>è„é¡µ</strong>ï¼Œç„¶åå†ç”±åå°çº¿ç¨‹å°†è„é¡µå†™å…¥åˆ°ç£ç›˜ã€‚</p><p>é‚£ä¸ºäº†èƒ½å¿«é€ŸçŸ¥é“å“ªäº›ç¼“å­˜é¡µæ˜¯è„çš„ï¼Œäºæ˜¯å°±è®¾è®¡å‡º <strong>Flush é“¾è¡¨</strong>ï¼Œå®ƒè·Ÿ Free é“¾è¡¨ç±»ä¼¼çš„ï¼Œé“¾è¡¨çš„èŠ‚ç‚¹ä¹Ÿæ˜¯æ§åˆ¶å—ï¼ŒåŒºåˆ«åœ¨äº Flush é“¾è¡¨çš„å…ƒç´ éƒ½æ˜¯è„é¡µã€‚</p><p>æœ‰äº† Flush é“¾è¡¨åï¼Œåå°çº¿ç¨‹å°±å¯ä»¥éå† Flush é“¾è¡¨ï¼Œå°†è„é¡µå†™å…¥åˆ°ç£ç›˜ã€‚</p><h4 id="_3-å¦‚ä½•æé«˜ç¼“å­˜å‘½ä¸­ç‡" tabindex="-1"><a class="header-anchor" href="#_3-å¦‚ä½•æé«˜ç¼“å­˜å‘½ä¸­ç‡"><span>3)å¦‚ä½•æé«˜ç¼“å­˜å‘½ä¸­ç‡ï¼Ÿ</span></a></h4><p>Buffer Pool çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œå¯¹äºä¸€äº›é¢‘ç¹è®¿é—®çš„æ•°æ®æˆ‘ä»¬å¸Œæœ›å¯ä»¥ä¸€ç›´ç•™åœ¨ Buffer Pool ä¸­ï¼Œè€Œä¸€äº›å¾ˆå°‘è®¿é—®çš„æ•°æ®å¸Œæœ›å¯ä»¥åœ¨æŸäº›æ—¶æœºå¯ä»¥æ·˜æ±°æ‰ï¼Œä»è€Œä¿è¯ Buffer Pool ä¸ä¼šå› ä¸ºæ»¡äº†è€Œå¯¼è‡´æ— æ³•å†ç¼“å­˜æ–°çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯å¸¸ç”¨æ•°æ®ç•™åœ¨ Buffer Pool ä¸­ã€‚</p><p>è¦å®ç°è¿™ä¸ªï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„å°±æ˜¯ <strong>LRUï¼ˆLeast recently usedï¼‰ç®—æ³•</strong>ã€‚</p><p>è¯¥ç®—æ³•çš„æ€è·¯æ˜¯ï¼Œé“¾è¡¨å¤´éƒ¨çš„èŠ‚ç‚¹æ˜¯æœ€è¿‘ä½¿ç”¨çš„ï¼Œè€Œé“¾è¡¨æœ«å°¾çš„èŠ‚ç‚¹æ˜¯æœ€ä¹…æ²¡è¢«ä½¿ç”¨çš„ã€‚é‚£ä¹ˆï¼Œå½“ç©ºé—´ä¸å¤Ÿäº†ï¼Œå°±æ·˜æ±°æœ€ä¹…æ²¡è¢«ä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œä»è€Œè…¾å‡ºç©ºé—´ã€‚</p><p>ç®€å•çš„ LRU ç®—æ³•çš„å®ç°æ€è·¯æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å½“è®¿é—®çš„é¡µåœ¨ Buffer Pool é‡Œï¼Œå°±ç›´æ¥æŠŠè¯¥é¡µå¯¹åº”çš„ LRU é“¾è¡¨èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚</li><li>å½“è®¿é—®çš„é¡µä¸åœ¨ Buffer Pool é‡Œï¼Œé™¤äº†è¦æŠŠé¡µæ”¾å…¥åˆ° LRU é“¾è¡¨çš„å¤´éƒ¨ï¼Œè¿˜è¦æ·˜æ±° LRU é“¾è¡¨æœ«å°¾çš„èŠ‚ç‚¹ã€‚</li></ul><!----><p>å›¾ä¸­ï¼š</p><ul><li>Free Pageï¼ˆç©ºé—²é¡µï¼‰ï¼Œè¡¨ç¤ºæ­¤é¡µæœªè¢«ä½¿ç”¨ï¼Œä½äº Free é“¾è¡¨ï¼›</li><li>Clean Pageï¼ˆå¹²å‡€é¡µï¼‰ï¼Œè¡¨ç¤ºæ­¤é¡µå·²è¢«ä½¿ç”¨ï¼Œä½†æ˜¯é¡µé¢æœªå‘ç”Ÿä¿®æ”¹ï¼Œä½äº LRU é“¾è¡¨ã€‚</li><li>Dirty Pageï¼ˆè„é¡µï¼‰ï¼Œè¡¨ç¤ºæ­¤é¡µã€Œå·²è¢«ä½¿ç”¨ã€ä¸”ã€Œå·²ç»è¢«ä¿®æ”¹ã€ï¼Œå…¶æ•°æ®å’Œç£ç›˜ä¸Šçš„æ•°æ®å·²ç»ä¸ä¸€è‡´ã€‚å½“è„é¡µä¸Šçš„æ•°æ®å†™å…¥ç£ç›˜åï¼Œå†…å­˜æ•°æ®å’Œç£ç›˜æ•°æ®ä¸€è‡´ï¼Œé‚£ä¹ˆè¯¥é¡µå°±å˜æˆäº†å¹²å‡€é¡µã€‚è„é¡µåŒæ—¶å­˜åœ¨äº LRU é“¾è¡¨å’Œ Flush é“¾è¡¨ã€‚</li></ul><p>ç®€å•çš„ LRU ç®—æ³•å¹¶æ²¡æœ‰è¢« MySQL ä½¿ç”¨ï¼Œå› ä¸ºç®€å•çš„ LRU ç®—æ³•æ— æ³•é¿å…ä¸‹é¢è¿™ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><p>é¢„è¯»å¤±æ•ˆï¼›</p></li><li><p>Buffer Pool æ±¡æŸ“ï¼›</p><p><strong>(a)é¢„è¯»å¤±æ•ˆ</strong></p></li></ul><blockquote><p>ä»€ä¹ˆæ˜¯é¢„è¯»å¤±æ•ˆï¼Ÿ</p><p>å…ˆæ¥è¯´è¯´ MySQL çš„é¢„è¯»æœºåˆ¶ã€‚ç¨‹åºæ˜¯æœ‰ç©ºé—´å±€éƒ¨æ€§çš„ï¼Œé è¿‘å½“å‰è¢«è®¿é—®æ•°æ®çš„æ•°æ®ï¼Œåœ¨æœªæ¥å¾ˆå¤§æ¦‚ç‡ä¼šè¢«è®¿é—®åˆ°ã€‚æ‰€ä»¥ï¼ŒMySQL åœ¨åŠ è½½æ•°æ®é¡µæ—¶ï¼Œä¼šæå‰æŠŠå®ƒç›¸é‚»çš„æ•°æ®é¡µä¸€å¹¶åŠ è½½è¿›æ¥ï¼Œç›®çš„æ˜¯ä¸ºäº†å‡å°‘ç£ç›˜ IOã€‚</p><p>ä½†æ˜¯å¯èƒ½è¿™äº›<strong>è¢«æå‰åŠ è½½è¿›æ¥çš„æ•°æ®é¡µï¼Œå¹¶æ²¡æœ‰è¢«è®¿é—®</strong>ï¼Œç›¸å½“äºè¿™ä¸ªé¢„è¯»æ˜¯ç™½åšäº†ï¼Œè¿™ä¸ªå°±æ˜¯<strong>é¢„è¯»å¤±æ•ˆ</strong>ã€‚</p><p>å¦‚æœä½¿ç”¨ç®€å•çš„ LRU ç®—æ³•ï¼Œå°±ä¼šæŠŠé¢„è¯»é¡µæ”¾åˆ° LRU é“¾è¡¨å¤´éƒ¨ï¼Œè€Œå½“ Buffer Pool ç©ºé—´ä¸å¤Ÿçš„æ—¶å€™ï¼Œè¿˜éœ€è¦æŠŠæœ«å°¾çš„é¡µæ·˜æ±°æ‰ã€‚å¦‚æœè¿™äº›é¢„è¯»é¡µå¦‚æœä¸€ç›´ä¸ä¼šè¢«è®¿é—®åˆ°ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜ï¼Œä¸ä¼šè¢«è®¿é—®çš„é¢„è¯»é¡µå´å ç”¨äº† LRU é“¾è¡¨å‰æ’çš„ä½ç½®ï¼Œè€Œæœ«å°¾æ·˜æ±°çš„é¡µï¼Œå¯èƒ½æ˜¯é¢‘ç¹è®¿é—®çš„é¡µï¼Œè¿™æ ·å°±å¤§å¤§é™ä½äº†ç¼“å­˜å‘½ä¸­ç‡ã€‚</p></blockquote><div class="hint-container tip"><p class="hint-container-title">æ€ä¹ˆè§£å†³é¢„è¯»å¤±æ•ˆè€Œå¯¼è‡´ç¼“å­˜å‘½ä¸­ç‡é™ä½çš„é—®é¢˜ï¼Ÿ</p><p>æˆ‘ä»¬ä¸èƒ½å› ä¸ºå®³æ€•é¢„è¯»å¤±æ•ˆï¼Œè€Œå°†é¢„è¯»æœºåˆ¶å»æ‰ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå±€éƒ¨æ€§åŸç†è¿˜æ˜¯æˆç«‹çš„ã€‚</p><p>è¦é¿å…é¢„è¯»å¤±æ•ˆå¸¦æ¥å½±å“ï¼Œæœ€å¥½å°±æ˜¯<strong>è®©é¢„è¯»çš„é¡µåœç•™åœ¨ Buffer Pool é‡Œçš„æ—¶é—´è¦å°½å¯èƒ½çš„çŸ­ï¼Œè®©çœŸæ­£è¢«è®¿é—®çš„é¡µæ‰ç§»åŠ¨åˆ° LRU é“¾è¡¨çš„å¤´éƒ¨ï¼Œä»è€Œä¿è¯çœŸæ­£è¢«è¯»å–çš„çƒ­æ•°æ®ç•™åœ¨ Buffer Pool é‡Œçš„æ—¶é—´å°½å¯èƒ½é•¿</strong>ã€‚</p></div><p><strong>é‚£åˆ°åº•æ€ä¹ˆæ‰èƒ½é¿å…å‘¢ï¼Ÿ</strong></p><p>MySQL æ˜¯è¿™æ ·åšçš„ï¼Œå®ƒæ”¹è¿›äº† LRU ç®—æ³•ï¼Œå°† LRU åˆ’åˆ†äº† 2 ä¸ªåŒºåŸŸï¼š<strong>old åŒºåŸŸ å’Œ young åŒºåŸŸ</strong>ã€‚young åŒºåŸŸåœ¨ LRU é“¾è¡¨çš„å‰åŠéƒ¨åˆ†ï¼Œold åŒºåŸŸåˆ™æ˜¯åœ¨ååŠéƒ¨åˆ†ï¼Œå¦‚ä¸‹å›¾ï¼š</p><!----><ul><li>old åŒºåŸŸå æ•´ä¸ª LRU é“¾è¡¨é•¿åº¦çš„æ¯”ä¾‹å¯ä»¥é€šè¿‡ <code>innodb_old_blocks_pct</code> å‚æ•°æ¥è®¾ç½®ï¼Œé»˜è®¤æ˜¯ 37ï¼Œä»£è¡¨æ•´ä¸ª LRU é“¾è¡¨ä¸­ young åŒºåŸŸä¸ old åŒºåŸŸæ¯”ä¾‹æ˜¯ 63:37ã€‚</li></ul><p><strong>åˆ’åˆ†è¿™ä¸¤ä¸ªåŒºåŸŸåï¼Œé¢„è¯»çš„é¡µå°±åªéœ€è¦åŠ å…¥åˆ° old åŒºåŸŸçš„å¤´éƒ¨ï¼Œå½“é¡µè¢«çœŸæ­£è®¿é—®çš„æ—¶å€™ï¼Œæ‰å°†é¡µæ’å…¥ young åŒºåŸŸçš„å¤´éƒ¨</strong>ã€‚å¦‚æœé¢„è¯»çš„é¡µä¸€ç›´æ²¡æœ‰è¢«è®¿é—®ï¼Œå°±ä¼šä» old åŒºåŸŸç§»é™¤ï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“ young åŒºåŸŸä¸­çš„çƒ­ç‚¹æ•°æ®ã€‚</p><p><strong>(b) Buffer Poolæ±¡æŸ“</strong></p><p>è™½ç„¶é€šè¿‡åˆ’åˆ† old åŒºåŸŸ å’Œ young åŒºåŸŸé¿å…äº†é¢„è¯»å¤±æ•ˆå¸¦æ¥çš„å½±å“ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜æ— æ³•è§£å†³ï¼Œé‚£å°±æ˜¯ <strong>Buffer Pool æ±¡æŸ“</strong>çš„é—®é¢˜ã€‚</p><blockquote><p>ä»€ä¹ˆæ˜¯ Buffer Pool æ±¡æŸ“ï¼Ÿ</p><p>å½“æŸä¸€ä¸ª SQL è¯­å¥<strong>æ‰«æäº†å¤§é‡çš„æ•°æ®</strong>æ—¶ï¼Œåœ¨ Buffer Pool ç©ºé—´æ¯”è¾ƒæœ‰é™çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå°† <strong>Buffer Pool é‡Œçš„æ‰€æœ‰é¡µéƒ½æ›¿æ¢å‡ºå»ï¼Œå¯¼è‡´å¤§é‡çƒ­æ•°æ®è¢«æ·˜æ±°äº†</strong>ï¼Œç­‰è¿™äº›çƒ­æ•°æ®åˆè¢«å†æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œç”±äºç¼“å­˜æœªå‘½ä¸­ï¼Œå°±ä¼šäº§ç”Ÿå¤§é‡çš„ç£ç›˜ IOï¼ŒMySQL æ€§èƒ½å°±ä¼šæ€¥å‰§ä¸‹é™ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º <strong>Buffer Pool æ±¡æŸ“</strong>ã€‚</p><p>æ³¨æ„ï¼ŒBuffer Pool æ±¡æŸ“å¹¶ä¸åªæ˜¯æŸ¥è¯¢è¯­å¥æŸ¥è¯¢å‡ºäº†å¤§é‡çš„æ•°æ®æ‰å‡ºç°çš„é—®é¢˜ï¼Œå³ä½¿æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†å¾ˆå°ï¼Œä¹Ÿä¼šé€ æˆ Buffer Pool æ±¡æŸ“ã€‚</p></blockquote><p>æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªæ•°æ®é‡éå¸¸å¤§çš„è¡¨ï¼Œæ‰§è¡Œäº†è¿™æ¡è¯­å¥ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&quot;%xiaolin%&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯èƒ½è¿™ä¸ªæŸ¥è¯¢å‡ºæ¥çš„ç»“æœå°±å‡ æ¡è®°å½•ï¼Œä½†æ˜¯ç”±äºè¿™æ¡è¯­å¥ä¼šå‘ç”Ÿç´¢å¼•å¤±æ•ˆï¼Œæ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢è¿‡ç¨‹æ˜¯å…¨è¡¨æ‰«æçš„ï¼Œæ¥ç€ä¼šå‘ç”Ÿå¦‚ä¸‹çš„è¿‡ç¨‹ï¼š</p><ul><li>ä»ç£ç›˜è¯»åˆ°çš„é¡µåŠ å…¥åˆ° LRU é“¾è¡¨çš„ old åŒºåŸŸå¤´éƒ¨ï¼›</li><li>å½“ä»é¡µé‡Œè¯»å–è¡Œè®°å½•æ—¶ï¼Œä¹Ÿå°±æ˜¯é¡µè¢«è®¿é—®çš„æ—¶å€™ï¼Œå°±è¦å°†è¯¥é¡µæ”¾åˆ° young åŒºåŸŸå¤´éƒ¨ï¼›</li><li>æ¥ä¸‹æ¥æ‹¿è¡Œè®°å½•çš„ name å­—æ®µå’Œå­—ç¬¦ä¸² xiaolin è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶ï¼Œå°±åŠ å…¥åˆ°ç»“æœé›†é‡Œï¼›</li><li>å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°æ‰«æå®Œè¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚</li></ul><p>ç»è¿‡è¿™ä¸€ç•ªæŠ˜è…¾ï¼ŒåŸæœ¬ young åŒºåŸŸçš„çƒ­ç‚¹æ•°æ®éƒ½ä¼šè¢«æ›¿æ¢æ‰ã€‚</p><p><strong>æ€ä¹ˆè§£å†³å‡ºç° Buffer Pool æ±¡æŸ“è€Œå¯¼è‡´ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™çš„é—®é¢˜ï¼Ÿ</strong></p><p>åƒå‰é¢è¿™ç§å…¨è¡¨æ‰«æçš„æŸ¥è¯¢ï¼Œå¾ˆå¤šç¼“å†²é¡µå…¶å®åªä¼šè¢«è®¿é—®ä¸€æ¬¡ï¼Œä½†æ˜¯å®ƒå´åªå› ä¸ºè¢«è®¿é—®äº†ä¸€æ¬¡è€Œè¿›å…¥åˆ° young åŒºåŸŸï¼Œä»è€Œå¯¼è‡´çƒ­ç‚¹æ•°æ®è¢«æ›¿æ¢äº†ã€‚LRU é“¾è¡¨ä¸­ young åŒºåŸŸå°±æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œåªè¦æˆ‘ä»¬æé«˜è¿›å…¥åˆ° young åŒºåŸŸçš„é—¨æ§›ï¼Œå°±èƒ½æœ‰æ•ˆåœ°ä¿è¯ young åŒºåŸŸé‡Œçš„çƒ­ç‚¹æ•°æ®ä¸ä¼šè¢«æ›¿æ¢æ‰ã€‚</p><p>MySQL æ˜¯è¿™æ ·åšçš„ï¼Œè¿›å…¥åˆ° young åŒºåŸŸæ¡ä»¶å¢åŠ äº†ä¸€ä¸ª<strong>åœç•™åœ¨ old åŒºåŸŸçš„æ—¶é—´åˆ¤æ–­</strong>ã€‚</p><p>å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼Œåœ¨å¯¹æŸä¸ªå¤„åœ¨ old åŒºåŸŸçš„ç¼“å­˜é¡µè¿›è¡Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶ï¼Œå°±åœ¨å®ƒå¯¹åº”çš„æ§åˆ¶å—ä¸­è®°å½•ä¸‹æ¥è¿™ä¸ªè®¿é—®æ—¶é—´ï¼š</p><ul><li>å¦‚æœåç»­çš„è®¿é—®æ—¶é—´ä¸ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶é—´<strong>åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…</strong>ï¼Œé‚£ä¹ˆ<strong>è¯¥ç¼“å­˜é¡µå°±ä¸ä¼šè¢«ä» old åŒºåŸŸç§»åŠ¨åˆ° young åŒºåŸŸçš„å¤´éƒ¨</strong>ï¼›</li><li>å¦‚æœåç»­çš„è®¿é—®æ—¶é—´ä¸ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶é—´<strong>ä¸åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…</strong>ï¼Œé‚£ä¹ˆ<strong>è¯¥ç¼“å­˜é¡µç§»åŠ¨åˆ° young åŒºåŸŸçš„å¤´éƒ¨</strong>ï¼›</li></ul><p>è¿™ä¸ªé—´éš”æ—¶é—´æ˜¯ç”± <code>innodb_old_blocks_time</code> æ§åˆ¶çš„ï¼Œé»˜è®¤æ˜¯ 1000 msã€‚</p><ul><li><p>ä¹Ÿå°±è¯´ï¼Œ<strong>åªæœ‰åŒæ—¶æ»¡è¶³ã€Œè¢«è®¿é—®ã€ä¸ã€Œåœ¨ old åŒºåŸŸåœç•™æ—¶é—´è¶…è¿‡ 1 ç§’ã€ä¸¤ä¸ªæ¡ä»¶ï¼Œæ‰ä¼šè¢«æ’å…¥åˆ° young åŒºåŸŸå¤´éƒ¨</strong>ï¼Œè¿™æ ·å°±è§£å†³äº† Buffer Pool æ±¡æŸ“çš„é—®é¢˜ã€‚</p></li><li><p>å¦å¤–ï¼ŒMySQL é’ˆå¯¹ young åŒºåŸŸå…¶å®åšäº†ä¸€ä¸ªä¼˜åŒ–ï¼Œä¸ºäº†é˜²æ­¢ young åŒºåŸŸèŠ‚ç‚¹é¢‘ç¹ç§»åŠ¨åˆ°å¤´éƒ¨ã€‚<strong>young åŒºåŸŸå‰é¢ 1/4 è¢«è®¿é—®ä¸ä¼šç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨</strong>ï¼Œåªæœ‰åé¢çš„ 3/4 è¢«è®¿é—®äº†æ‰ä¼šã€‚</p></li></ul><h4 id="_4-è„é¡µä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ·å…¥ç£ç›˜" tabindex="-1"><a class="header-anchor" href="#_4-è„é¡µä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ·å…¥ç£ç›˜"><span>4)è„é¡µä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ·å…¥ç£ç›˜ï¼Ÿ</span></a></h4><p>å¼•å…¥äº† Buffer Pool åï¼Œå½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œé¦–å…ˆæ˜¯ä¿®æ”¹ Buffer Pool ä¸­æ•°æ®æ‰€åœ¨çš„é¡µï¼Œç„¶åå°†å…¶é¡µè®¾ç½®ä¸ºè„é¡µï¼Œä½†æ˜¯ç£ç›˜ä¸­è¿˜æ˜¯åŸæ•°æ®ã€‚å› æ­¤ï¼Œè„é¡µéœ€è¦è¢«åˆ·å…¥ç£ç›˜ï¼Œä¿è¯ç¼“å­˜å’Œç£ç›˜æ•°æ®ä¸€è‡´ï¼Œä½†æ˜¯è‹¥æ¯æ¬¡ä¿®æ”¹æ•°æ®éƒ½åˆ·å…¥ç£ç›˜ï¼Œåˆ™æ€§èƒ½ä¼šå¾ˆå·®ï¼Œå› æ­¤ä¸€èˆ¬éƒ½ä¼šåœ¨ä¸€å®šæ—¶æœºè¿›è¡Œæ‰¹é‡åˆ·ç›˜ã€‚</p><p>å¯èƒ½å¤§å®¶æ‹…å¿ƒï¼Œå¦‚æœåœ¨è„é¡µè¿˜æ²¡æœ‰æ¥å¾—åŠåˆ·å…¥åˆ°ç£ç›˜æ—¶ï¼ŒMySQL å®•æœºäº†ï¼Œä¸å°±ä¸¢å¤±æ•°æ®äº†å—ï¼Ÿ</p><p>è¿™ä¸ªä¸ç”¨æ‹…å¿ƒï¼ŒInnoDB çš„æ›´æ–°æ“ä½œé‡‡ç”¨çš„æ˜¯ Write Ahead Log ç­–ç•¥ï¼Œ<strong>å³å…ˆå†™æ—¥å¿—ï¼Œå†å†™å…¥ç£ç›˜ï¼Œé€šè¿‡ redo log æ—¥å¿—è®© MySQL æ‹¥æœ‰äº†å´©æºƒæ¢å¤èƒ½åŠ›ã€‚</strong></p><p>ä¸‹é¢å‡ ç§æƒ…å†µä¼šè§¦å‘è„é¡µçš„åˆ·æ–°ï¼š</p><ul><li>å½“ redo log æ—¥å¿—æ»¡äº†çš„æƒ…å†µä¸‹ï¼Œä¼šä¸»åŠ¨è§¦å‘è„é¡µåˆ·æ–°åˆ°ç£ç›˜ï¼›</li><li>Buffer Pool ç©ºé—´ä¸è¶³æ—¶ï¼Œéœ€è¦å°†ä¸€éƒ¨åˆ†æ•°æ®é¡µæ·˜æ±°æ‰ï¼Œå¦‚æœæ·˜æ±°çš„æ˜¯è„é¡µï¼Œéœ€è¦å…ˆå°†è„é¡µåŒæ­¥åˆ°ç£ç›˜ï¼›</li><li>MySQL è®¤ä¸ºç©ºé—²æ—¶ï¼Œåå°çº¿ç¨‹å›å®šæœŸå°†é€‚é‡çš„è„é¡µåˆ·å…¥åˆ°ç£ç›˜ï¼›</li><li>MySQL æ­£å¸¸å…³é—­ä¹‹å‰ï¼Œä¼šæŠŠæ‰€æœ‰çš„è„é¡µåˆ·å…¥åˆ°ç£ç›˜ï¼›</li></ul><p>åœ¨æˆ‘ä»¬å¼€å¯äº†æ…¢ SQL ç›‘æ§åï¼Œå¦‚æœä½ å‘ç°**ã€Œå¶å°”ã€ä¼šå‡ºç°ä¸€äº›ç”¨æ—¶ç¨é•¿çš„ SQL**ï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºè„é¡µåœ¨åˆ·æ–°åˆ°ç£ç›˜æ—¶å¯èƒ½ä¼šç»™æ•°æ®åº“å¸¦æ¥æ€§èƒ½å¼€é”€ï¼Œå¯¼è‡´æ•°æ®åº“æ“ä½œæŠ–åŠ¨ã€‚</p><p>å¦‚æœé—´æ–­å‡ºç°è¿™ç§ç°è±¡ï¼Œå°±éœ€è¦è°ƒå¤§ Buffer Pool ç©ºé—´æˆ– redo log æ—¥å¿—çš„å¤§å°ã€‚</p><div class="hint-container important"><p class="hint-container-title">æ€»ç»“</p><p>1ã€Innodb å­˜å‚¨å¼•æ“è®¾è®¡äº†ä¸€ä¸ª<strong>ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰</strong>ï¼Œæ¥æé«˜æ•°æ®åº“çš„è¯»å†™æ€§èƒ½ã€‚</p><p>2ã€Buffer Pool ä»¥é¡µä¸ºå•ä½ç¼“å†²æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ <code>innodb_buffer_pool_size</code> å‚æ•°è°ƒæ•´ç¼“å†²æ± çš„å¤§å°ï¼Œé»˜è®¤æ˜¯ 128 Mã€‚</p><p>3ã€Innodb é€šè¿‡ä¸‰ç§é“¾è¡¨æ¥ç®¡ç†ç¼“é¡µï¼š</p><ul><li>Free Listï¼ˆç©ºé—²é¡µé“¾è¡¨ï¼‰ï¼Œç®¡ç†ç©ºé—²é¡µï¼›</li><li>Flush Listï¼ˆè„é¡µé“¾è¡¨ï¼‰ï¼Œç®¡ç†è„é¡µï¼›</li><li>LRU Listï¼Œç®¡ç†è„é¡µ + å¹²å‡€é¡µï¼Œå°†æœ€è¿‘ä¸”ç»å¸¸æŸ¥è¯¢çš„æ•°æ®ç¼“å­˜åœ¨å…¶ä¸­ï¼Œè€Œä¸å¸¸æŸ¥è¯¢çš„æ•°æ®å°±æ·˜æ±°å‡ºå»ã€‚</li></ul><p>4ã€InnoDB å¯¹ LRU åšäº†ä¸€äº›ä¼˜åŒ–ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„ LRU ç®—æ³•é€šå¸¸æ˜¯å°†æœ€è¿‘æŸ¥è¯¢çš„æ•°æ®æ”¾åˆ° LRU é“¾è¡¨çš„å¤´éƒ¨ï¼Œè€Œ InnoDB åš 2 ç‚¹ä¼˜åŒ–ï¼š</p><ul><li>å°† LRU é“¾è¡¨ åˆ†ä¸º<strong>young å’Œ old ä¸¤ä¸ªåŒºåŸŸ</strong>ï¼ŒåŠ å…¥ç¼“å†²æ± çš„é¡µï¼Œä¼˜å…ˆæ’å…¥ old åŒºåŸŸï¼›é¡µè¢«è®¿é—®æ—¶ï¼Œæ‰è¿›å…¥ young åŒºåŸŸï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³é¢„è¯»å¤±æ•ˆçš„é—®é¢˜ã€‚</li><li>å½“ <strong>ã€Œé¡µè¢«è®¿é—®ã€ä¸”ã€Œold åŒºåŸŸåœç•™æ—¶é—´è¶…è¿‡ <code>innodb_old_blocks_time</code> é˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 1 ç§’ï¼‰ã€</strong> æ—¶ï¼Œæ‰ä¼šå°†é¡µæ’å…¥åˆ° young åŒºåŸŸï¼Œå¦åˆ™è¿˜æ˜¯æ’å…¥åˆ° old åŒºåŸŸï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³æ‰¹é‡æ•°æ®è®¿é—®ï¼Œå¤§é‡çƒ­æ•°æ®æ·˜æ±°çš„é—®é¢˜ã€‚</li></ul><p>5ã€å¯ä»¥é€šè¿‡è°ƒæ•´ <code>innodb_old_blocks_pct</code> å‚æ•°ï¼Œè®¾ç½® young åŒºåŸŸå’Œ old åŒºåŸŸæ¯”ä¾‹ã€‚</p></div><h2 id="å››ã€äº‹åŠ¡åŸç†" tabindex="-1"><a class="header-anchor" href="#å››ã€äº‹åŠ¡åŸç†"><span>å››ã€äº‹åŠ¡åŸç†</span></a></h2><h3 id="_1ã€äº‹åŠ¡åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#_1ã€äº‹åŠ¡åŸºç¡€"><span>1ã€äº‹åŠ¡åŸºç¡€</span></a></h3><p>äº‹åŠ¡ æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><div class="hint-container tip"><p class="hint-container-title">äº‹åŠ¡ç‰¹æ€§</p><ul><li><p>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p></li><li><p>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€ã€‚</p></li><li><p>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œã€‚</p></li><li><p>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ã€‚</p></li></ul></div><p>æˆ‘ä»¬ç ”ç©¶äº‹åŠ¡çš„åŸç†ï¼Œå°±æ˜¯ç ”ç©¶MySQLçš„InnoDBå¼•æ“æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„è¿™å››å¤§ç‰¹æ€§çš„ã€‚</p><p>è€Œå¯¹äºè¿™å››å¤§ç‰¹æ€§ï¼Œå®é™…ä¸Šåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><ul><li>åŸå­æ€§ã€ä¸€è‡´æ€§ã€æŒä¹…æ€§ï¼Œå®é™…ä¸Šæ˜¯ç”±InnoDBä¸­çš„ä¸¤ä»½æ—¥å¿—æ¥ä¿è¯çš„ï¼Œä¸€ä»½æ˜¯redo logæ—¥å¿—ï¼Œä¸€ä»½æ˜¯undo logæ—¥å¿—ã€‚</li><li>éš”ç¦»æ€§æ˜¯é€šè¿‡æ•°æ®åº“çš„é”ï¼ŒåŠ ä¸ŠMVCCæ¥ä¿è¯çš„ã€‚</li></ul><h4 id="_1-redo-log" tabindex="-1"><a class="header-anchor" href="#_1-redo-log"><span>1)redo log</span></a></h4><p>é‡åšæ—¥å¿—ï¼Œè®°å½•çš„æ˜¯äº‹åŠ¡æäº¤æ—¶æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œæ˜¯ç”¨æ¥å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ã€‚è¯¥æ—¥å¿—æ–‡ä»¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé‡åšæ—¥å¿—ç¼“å†²ï¼ˆredo log bufferï¼‰ä»¥åŠé‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredo log fileï¼‰,å‰è€…æ˜¯åœ¨å†…å­˜ä¸­ï¼Œåè€…åœ¨ç£ç›˜ä¸­ã€‚å½“äº‹åŠ¡æäº¤ä¹‹åä¼šæŠŠæ‰€æœ‰ä¿®æ”¹ä¿¡æ¯éƒ½å­˜åˆ°è¯¥æ—¥å¿—æ–‡ä»¶ä¸­, ç”¨äºåœ¨åˆ·æ–°è„é¡µåˆ°ç£ç›˜,å‘ç”Ÿé”™è¯¯æ—¶, è¿›è¡Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚</p><p>åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šå°†redo log bufferä¸­çš„æ•°æ®åˆ·æ–°åˆ°redo logç£ç›˜æ–‡ä»¶ä¸­ã€‚è¿‡ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¦‚æœåˆ·æ–°ç¼“å†²åŒºçš„è„é¡µåˆ°ç£ç›˜æ—¶ï¼Œå‘ç”Ÿé”™è¯¯ï¼Œæ­¤æ—¶å°±å¯ä»¥å€ŸåŠ©äºredo logè¿›è¡Œæ•°æ®æ¢å¤ï¼Œè¿™æ ·å°±ä¿è¯äº†äº‹åŠ¡çš„æŒä¹…æ€§ã€‚ è€Œå¦‚æœè„é¡µæˆåŠŸåˆ·æ–°åˆ°ç£ç›˜ æˆ– æˆ–è€…æ¶‰åŠåˆ°çš„æ•°æ®å·²ç»è½ç›˜ï¼Œæ­¤æ—¶redologå°±æ²¡æœ‰ä½œç”¨äº†ï¼Œå°±å¯ä»¥åˆ é™¤äº†ï¼Œæ‰€ä»¥å­˜åœ¨çš„<strong>ä¸¤ä¸ªredologæ–‡ä»¶æ˜¯å¾ªç¯å†™çš„</strong>ã€‚</p><blockquote><p>é‚£ä¸ºä»€ä¹ˆæ¯ä¸€æ¬¡æäº¤äº‹åŠ¡ï¼Œè¦åˆ·æ–°redo log åˆ°ç£ç›˜ä¸­å‘¢ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†buffer poolä¸­çš„è„é¡µåˆ·æ–°åˆ°ç£ç›˜å‘¢ ?</p><p>å› ä¸ºåœ¨ä¸šåŠ¡æ“ä½œä¸­ï¼Œæˆ‘ä»¬æ“ä½œæ•°æ®ä¸€èˆ¬éƒ½æ˜¯éšæœºè¯»å†™ç£ç›˜çš„ï¼Œè€Œä¸æ˜¯é¡ºåºè¯»å†™ç£ç›˜ã€‚ è€Œredo logåœ¨å¾€ç£ç›˜æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ï¼Œç”±äºæ˜¯æ—¥å¿—æ–‡ä»¶ï¼Œæ‰€ä»¥éƒ½æ˜¯é¡ºåºå†™çš„ã€‚é¡ºåºå†™çš„æ•ˆç‡ï¼Œè¦è¿œå¤§äºéšæœºå†™ã€‚ è¿™ç§å…ˆå†™æ—¥å¿—çš„æ–¹å¼ï¼Œç§°ä¹‹ä¸º WALï¼ˆWrite-Ahead Loggingï¼‰ã€‚</p></blockquote><h4 id="_2-undo-log" tabindex="-1"><a class="header-anchor" href="#_2-undo-log"><span>2)undo log</span></a></h4><p>å›æ»šæ—¥å¿—ï¼Œç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ , ä½œç”¨åŒ…å«ä¸¤ä¸ª : æä¾›å›æ»š(ä¿è¯äº‹åŠ¡çš„åŸå­æ€§) å’Œ MVCC(å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶) ã€‚</p><p>undo logå’Œredo logè®°å½•ç‰©ç†æ—¥å¿—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯é€»è¾‘æ—¥å¿—ã€‚å¯ä»¥è®¤ä¸ºå½“deleteä¸€æ¡è®°å½•æ—¶ï¼Œundo logä¸­ä¼šè®°å½•ä¸€æ¡å¯¹åº”çš„insertè®°å½•ï¼Œåä¹‹äº¦ç„¶ï¼Œå½“updateä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒè®°å½•ä¸€æ¡å¯¹åº”ç›¸åçš„updateè®°å½•ã€‚å½“æ‰§è¡Œrollbackæ—¶ï¼Œå°±å¯ä»¥ä»undo logä¸­çš„é€»è¾‘è®°å½•è¯»å–åˆ°ç›¸åº”çš„å†…å®¹å¹¶è¿›è¡Œå›æ»šã€‚</p><ul><li><p>Undo logé”€æ¯ï¼šundo logåœ¨äº‹åŠ¡æ‰§è¡Œæ—¶äº§ç”Ÿï¼Œäº‹åŠ¡æäº¤æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³åˆ é™¤undo logï¼Œå› ä¸ºè¿™äº›æ—¥å¿—å¯èƒ½è¿˜ç”¨äºMVCCã€‚</p></li><li><p>Undo logå­˜å‚¨ï¼šundo logé‡‡ç”¨æ®µçš„æ–¹å¼è¿›è¡Œç®¡ç†å’Œè®°å½•ï¼Œå­˜æ”¾åœ¨å‰é¢ä»‹ç»çš„ rollback segmentå›æ»šæ®µä¸­ï¼Œå†…éƒ¨åŒ…å«1024ä¸ªundo log segmentã€‚</p></li></ul><h3 id="_2ã€mvccåŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_2ã€mvccåŸºæœ¬æ¦‚å¿µ"><span>2ã€MVCCåŸºæœ¬æ¦‚å¿µ</span></a></h3><h4 id="_1-å½“å‰è¯»" tabindex="-1"><a class="header-anchor" href="#_1-å½“å‰è¯»"><span>1)å½“å‰è¯»</span></a></h4><p>è¯»å–çš„æ˜¯è®°å½•çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯»å–æ—¶è¿˜è¦ä¿è¯å…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½ä¿®æ”¹å½“å‰è®°å½•ï¼Œä¼šå¯¹è¯»å–çš„è®°å½•è¿›è¡ŒåŠ é”ã€‚</p><p>å¯¹äºæˆ‘ä»¬æ—¥å¸¸çš„æ“ä½œï¼Œå¦‚ï¼š<code>select ... lock in share mode</code>(å…±äº«é”)ï¼Œ<code>select ... for update</code>ã€<code>update</code>ã€<code>insert</code>ã€<code>delete</code>(æ’ä»–é”)éƒ½æ˜¯ä¸€ç§å½“å‰è¯»ã€‚</p><h4 id="_2-å¿«ç…§è¯»" tabindex="-1"><a class="header-anchor" href="#_2-å¿«ç…§è¯»"><span>2)å¿«ç…§è¯»</span></a></h4><p>ç®€å•çš„selectï¼ˆä¸åŠ é”ï¼‰å°±æ˜¯å¿«ç…§è¯»ï¼Œå¿«ç…§è¯»ï¼Œè¯»å–çš„æ˜¯è®°å½•æ•°æ®çš„å¯è§ç‰ˆæœ¬ï¼Œæœ‰å¯èƒ½æ˜¯å†å²æ•°æ®ï¼Œä¸åŠ é”ï¼Œæ˜¯éé˜»å¡è¯»ã€‚</p><ul><li><p>Read Committedï¼šæ¯æ¬¡selectï¼Œéƒ½ç”Ÿæˆä¸€ä¸ªå¿«ç…§è¯»ã€‚</p></li><li><p>Repeatable Readï¼šå¼€å¯äº‹åŠ¡åç¬¬ä¸€ä¸ªselectè¯­å¥æ‰æ˜¯å¿«ç…§è¯»çš„åœ°æ–¹ã€‚</p></li><li><p>Serializableï¼šå¿«ç…§è¯»ä¼šé€€åŒ–ä¸ºå½“å‰è¯»ã€‚</p></li></ul><h4 id="_3-mvcc" tabindex="-1"><a class="header-anchor" href="#_3-mvcc"><span>3)MVCC</span></a></h4><p>å…¨ç§°<code> Multi-Version Concurrency Control</code>ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚æŒ‡ç»´æŠ¤ä¸€ä¸ªæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä½¿å¾—è¯»å†™æ“ä½œæ²¡æœ‰å†²çªï¼Œå¿«ç…§è¯»ä¸ºMySQLå®ç°MVCCæä¾›äº†ä¸€ä¸ªéé˜»å¡è¯»åŠŸèƒ½ã€‚MVCCçš„å…·ä½“å®ç°ï¼Œè¿˜éœ€è¦ä¾èµ–äºæ•°æ®åº“è®°å½•ä¸­çš„<strong>ä¸‰ä¸ªéšå¼å­—æ®µã€undo logæ—¥å¿—ã€readView</strong>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥ä»‹ç»ä¸€ä¸‹InnoDBå¼•æ“çš„è¡¨ä¸­æ¶‰åŠåˆ°çš„éšè—å­—æ®µ ã€undolog ä»¥åŠ readviewï¼Œä»è€Œæ¥ä»‹ç»ä¸€ä¸‹MVCCçš„åŸç†ã€‚</p><h3 id="_3ã€éšè—å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#_3ã€éšè—å­—æ®µ"><span>3ã€éšè—å­—æ®µ</span></a></h3><p>åˆ›å»ºè¡¨çš„æ—¶å€™InnoDBä¼šè‡ªåŠ¨çš„ç»™æˆ‘ä»¬æ·»åŠ ä¸‰ä¸ªéšè—å­—æ®µåŠå…¶å«ä¹‰åˆ†åˆ«æ˜¯</p><table><thead><tr><th>éšè—å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>DB_TRX_ID</td><td>æœ€è¿‘ä¿®æ”¹äº‹åŠ¡IDï¼Œè®°å½•æ’å…¥è¿™æ¡è®°å½•æˆ–æœ€åä¸€æ¬¡ä¿®æ”¹è¯¥è®°å½•çš„äº‹åŠ¡IDã€‚</td></tr><tr><td>DB_ROLL_PTR</td><td>å›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç”¨äºé…åˆundo logï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬.</td></tr><tr><td>DB_ROW_ID</td><td>éšè—ä¸»é”®ï¼Œå¦‚æœè¡¨ç»“æ„æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œå°†ä¼šç”Ÿæˆè¯¥éšè—å­—æ®µã€‚</td></tr></tbody></table><p>ä¸Šè¿°çš„å‰ä¸¤ä¸ªå­—æ®µæ˜¯è‚¯å®šä¼šæ·»åŠ çš„ï¼Œ æ˜¯å¦æ·»åŠ æœ€åä¸€ä¸ªå­—æ®µDB_ROW_IDï¼Œå¾—çœ‹å½“å‰è¡¨æœ‰æ²¡æœ‰ä¸»é”®ï¼Œå¦‚æœæœ‰ä¸»é”®ï¼Œåˆ™ä¸ä¼šæ·»åŠ è¯¥éšè—å­—æ®µã€‚</p><h3 id="_4ã€undo-log" tabindex="-1"><a class="header-anchor" href="#_4ã€undo-log"><span>4ã€undo log</span></a></h3><p>å›æ»šæ—¥å¿—ï¼Œåœ¨insertã€updateã€deleteçš„æ—¶å€™äº§ç”Ÿçš„ä¾¿äºæ•°æ®å›æ»šçš„æ—¥å¿—ã€‚å½“insertçš„æ—¶å€™ï¼Œäº§ç”Ÿçš„undo logæ—¥å¿—åªåœ¨å›æ»šæ—¶éœ€è¦ï¼Œåœ¨äº‹åŠ¡æäº¤åï¼Œå¯è¢«ç«‹å³åˆ é™¤ã€‚è€Œupdateã€deleteçš„æ—¶å€™ï¼Œäº§ç”Ÿçš„undo logæ—¥å¿—ä¸ä»…åœ¨å›æ»šæ—¶éœ€è¦ï¼Œåœ¨å¿«ç…§è¯»æ—¶ä¹Ÿéœ€è¦ï¼Œä¸ä¼šç«‹å³è¢«åˆ é™¤ã€‚</p><p><strong>ç‰ˆæœ¬é“¾:</strong></p><p>å‰é¢æåˆ°è¿‡ï¼Œå¯¹è®°å½•çš„åˆ æ”¹æ“ä½œå¯¹åº”çš„Undoæ—¥å¿—é‡Œæœ‰old roll pointerå­—æ®µæŒ‡å‘æ—§çš„Undoæ—¥å¿—ï¼Œä»è€Œæ„æˆä¸€ä¸ªè®°å½•çš„ç‰ˆæœ¬é“¾ã€‚é“¾è¡¨çš„å¤´éƒ¨å°±æ˜¯å½“å‰è®°å½•çš„æœ€æ–°å€¼ã€‚</p><!----><h3 id="_5ã€readview" tabindex="-1"><a class="header-anchor" href="#_5ã€readview"><span>5ã€readview</span></a></h3><p>ReadViewï¼ˆè¯»è§†å›¾ï¼‰æ˜¯ å¿«ç…§è¯» SQLæ‰§è¡Œæ—¶MVCCæå–æ•°æ®çš„ä¾æ®ï¼Œè®°å½•å¹¶ç»´æŠ¤ç³»ç»Ÿå½“å‰æ´»è·ƒçš„äº‹åŠ¡ï¼ˆæœªæäº¤çš„ï¼‰idã€‚</p><p>ReadViewä¸­åŒ…å«äº†å››ä¸ªæ ¸å¿ƒå­—æ®µï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>m_ids</td><td>ç”ŸæˆReadViewæ—¶ç³»ç»Ÿä¸­æ´»è·ƒçš„è¯»å†™äº‹åŠ¡çš„idåˆ—è¡¨</td></tr><tr><td>min_trx_id</td><td>ç”ŸæˆReadViewæ—¶ç³»ç»Ÿä¸­æ´»è·ƒçš„è¯»å†™äº‹åŠ¡æœ€å°id</td></tr><tr><td>max_trx_id</td><td>ç”ŸæˆReadViewæ—¶ç³»ç»Ÿåº”åˆ†é…ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„idå€¼ï¼ˆæœ€å¤§æ´»è·ƒäº‹åŠ¡id+1ï¼‰</td></tr><tr><td>creator_trx_id</td><td>ç”Ÿæˆè¯¥ReadViewçš„äº‹åŠ¡idï¼ˆä»…å®é™…å¢åˆ æ”¹æ—¶æ‰åˆ†é…ï¼Œåªè¯»äº‹åŠ¡idé»˜è®¤0ï¼‰</td></tr></tbody></table><p><strong>è®¿é—®è§„åˆ™</strong> æœ‰äº†ReadViewåï¼ŒæŸ¥è¯¢è¿‡ç¨‹ä¼šé¡ºç€ç‰ˆæœ¬é“¾éå†ï¼Œæ ¹æ®ReadViewçš„è®¿é—®è§„åˆ™ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€æ¡å¯è®¿é—®çš„ç‰ˆæœ¬ï¼Œæˆ–ä¸å«è¯¥è®°å½•ã€‚å…¶ä¸­ï¼Œtrx_idä¸ºè¢«è®¿é—®ç‰ˆæœ¬çš„trx_idå±æ€§å€¼ï¼š</p><table><thead><tr><th>æ¡ä»¶</th><th>æ˜¯å¦å¯ä»¥è®¿é—®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>trx_id == creator_trx_id</td><td>å¯ä»¥è®¿é—®è¯¥ç‰ˆæœ¬</td><td>æˆç«‹ï¼Œè¯´æ˜æ•°æ®æ˜¯å½“å‰äº‹åŠ¡è‡ªå·±æ›´æ”¹çš„</td></tr><tr><td>trx_id &lt; min_trx_id</td><td>å¯ä»¥è®¿é—®è¯¥ç‰ˆæœ¬</td><td>æˆç«‹ï¼Œè¯´æ˜è¯¥ç‰ˆæœ¬åœ¨å½“å‰äº‹åŠ¡ç”ŸæˆReadViewå‰å·²ç»æäº¤</td></tr><tr><td>trx_id &gt; max_trx_id</td><td>ä¸å¯ä»¥è®¿é—®è¯¥ç‰ˆæœ¬</td><td>æˆç«‹ï¼Œè¯´æ˜è¯¥ç‰ˆæœ¬åœ¨å½“å‰äº‹åŠ¡ç”ŸæˆReadViewåæ‰å¼€å¯</td></tr><tr><td>min_trx_id &lt;= trx_id &lt;= max_trx_id</td><td>å¦‚æœtrx_idåœ¨m_idsä¸­ï¼Œä¸å¯ä»¥è®¿é—®ï¼›å¦åˆ™å¯ä»¥è®¿é—®</td><td>m_idså­˜åœ¨trx_idåˆ™è¯´æ˜è¯¥äº‹åŠ¡è¿˜æ˜¯æ´»è·ƒçš„ï¼Œä¸å­˜åœ¨åˆ™è¯´æ˜è¯¥äº‹åŠ¡å·²æäº¤</td></tr></tbody></table><p><strong>ç”Ÿæˆæ—¶æœº</strong> å¯¹äºREAD_COMMITTEDå’ŒREPEATABLE_READï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºå®ƒä»¬ç”ŸæˆReadViewçš„æ—¶æœºä¸åŒã€‚ä¹Ÿæ­£å› æ­¤ï¼ŒREAD_COMMITTEDæ— æ³•ç¦æ­¢ä¸å¯é‡å¤è¯»é—®é¢˜ã€‚</p><ul><li>READ_COMMITTEDäº‹åŠ¡æ¯æ¬¡SELECTæŸ¥è¯¢å‰éƒ½ä¼šç”Ÿæˆç‹¬ç«‹çš„ReadView</li><li>REPEATABLE_READäº‹åŠ¡åªåœ¨ç¬¬ä¸€æ¬¡SELECTæŸ¥è¯¢å‰ç”Ÿæˆä¸€ä¸ªå…±äº«çš„ReadView</li></ul><p>å¦å¤–ï¼Œä¸ºäº†æ”¯æŒMVCCï¼Œinsert undoæ—¥å¿—åœ¨äº‹åŠ¡æäº¤åå³å¯é‡Šæ”¾ï¼Œè€Œupdate undoæ—¥å¿—ä¸èƒ½ç«‹å³åˆ é™¤ï¼›åˆ é™¤æ—¶éœ€è¦åˆ†ä¸¤é˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µä»…åšdelete markã€‚</p><h3 id="_6ã€éš”ç¦»çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#_6ã€éš”ç¦»çº§åˆ«"><span>6ã€éš”ç¦»çº§åˆ«</span></a></h3><ul><li>RCéš”ç¦»çº§åˆ«: RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œåœ¨äº‹åŠ¡ä¸­æ¯ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”ŸæˆReadViewã€‚</li><li>RRéš”ç¦»çº§åˆ«: RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œä»…åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”ŸæˆReadViewï¼Œåç»­å¤ç”¨è¯¥ReadView,é‚£ä¹ˆæ—¢ç„¶ReadViewéƒ½ä¸€æ ·ï¼Œ ReadViewçš„ç‰ˆæœ¬é“¾åŒ¹é…è§„åˆ™ä¹Ÿä¸€æ ·ï¼Œ é‚£ä¹ˆæœ€ç»ˆå¿«ç…§è¯»è¿”å›çš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</li></ul><div class="hint-container important"><p class="hint-container-title">æ€»ç»“</p><p>æ‰€ä»¥å‘¢ï¼ŒMVCCçš„å®ç°åŸç†å°±æ˜¯é€šè¿‡ InnoDBè¡¨çš„éšè—å­—æ®µã€UndoLog ç‰ˆæœ¬é“¾ã€ReadViewæ¥å®ç°çš„ã€‚è€ŒMVCC + é”ï¼Œåˆ™å®ç°äº†äº‹åŠ¡çš„éš”ç¦»æ€§ã€‚ è€Œä¸€è‡´æ€§åˆ™æ˜¯ç”±redolog ä¸ undologä¿è¯ã€‚</p></div></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="vp-link vp-external-link-icon vp-meta-label" href="https://github.com/weiruyi/edit/main/src/posts/åç«¯/æ•°æ®åº“/16_mysqlé«˜çº§2.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1581778251@qq.com">weiruyi</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link vp-link prev" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/15_MySQL%E9%AB%98%E7%BA%A71.html" aria-label="MySQLé«˜çº§ä¸€"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><img class="icon" src="/img/mysql.svg" alt aria-hidden no-view style="">MySQLé«˜çº§ä¸€</div></a><a class="route-link vp-link next" href="/posts/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/20_redis.html" aria-label="RedisåŸºç¡€"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">RedisåŸºç¡€<img class="icon" src="/img/redis.svg" alt aria-hidden no-view style=""></div></a></nav><div id="vp-comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v3.2.0</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2024 RuyiWei </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-zhc43KOw.js" defer></script>
  </body>
</html>
